(this.webpackJsonptaski=this.webpackJsonptaski||[]).push([[0],{306:function(e,t,a){e.exports=a(518)},311:function(e,t,a){},363:function(e,t){},518:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(73),s=a.n(c),o=a(10),i=a(11),l=a(13),u=a(12),d=a(23),m=(a(311),a(15));function p(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"home-container hero-container"},r.a.createElement("div",{className:"hero-cta flex space-between align-center"},r.a.createElement("div",{className:"hero-content"},r.a.createElement("div",{className:"hero-txt"},"With wetask - You Can Start Working - With Confidence!"),r.a.createElement(m.a,{to:"/boards/EXAMPLE_BOARD_ID",className:"hero-btn"},"Try now")),r.a.createElement("img",{src:"assets/img/hero-img.svg",alt:"",className:"hero-img"}))))}var g=a(28),b=a(14),f=a.n(b),h=a(3),v=a(18),E=a(16),k=a(116),y=a.n(k),C=y.a.create({withCredentials:!0}),w=function(e,t){return j(e,"GET",t)},O=function(e,t){return j(e,"POST",t)},N=function(e,t){return j(e,"PUT",t)},S=function(e,t){return j(e,"DELETE",t)};function j(e){return x.apply(this,arguments)}function x(){return(x=Object(v.a)(f.a.mark((function e(t){var a,n,r,c=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=c.length>1&&void 0!==c[1]?c[1]:"get",n=c.length>2&&void 0!==c[2]?c[2]:null,e.prev=2,e.next=5,C({url:"".concat("/api/").concat(t),method:a,data:n});case 5:return r=e.sent,e.abrupt("return",r.data);case 9:throw e.prev=9,e.t0=e.catch(2),console.log("Had Issues ".concat(a,"ing to the backend, endpoint: ").concat(t,", with data: ").concat(n)),console.dir(e.t0),e.t0.response.data.error;case 14:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}var D={login:function(e){return B.apply(this,arguments)},logout:function(){return T.apply(this,arguments)},signup:function(e){return U.apply(this,arguments)},getById:function(e){return w("user/".concat(e))},query:function(e){return w(e?"users?q=".concat(e.q,"&boardId=").concat(e.board._id):"users")},update:function(e){return N("users/".concat(e._id),e)}};function B(){return(B=Object(v.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O("auth/login",t);case 3:return a=e.sent,e.abrupt("return",A(a));case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function U(){return(U=Object(v.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O("auth/signup",t);case 2:return a=e.sent,e.abrupt("return",A(a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(){return(T=Object(v.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O("auth/logout");case 2:sessionStorage.clear();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e){return sessionStorage.setItem("user",JSON.stringify(e)),e}function M(e){try{return function(){var t=Object(v.a)(f.a.mark((function t(a){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D.login(e);case 2:n=t.sent,a(R(n));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}catch(t){throw t}}function I(e){return function(){var t=Object(v.a)(f.a.mark((function t(a){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D.signup(e);case 2:n=t.sent,a(R(n));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function R(e){return{type:"SET_USER",user:e}}function L(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t="",a="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<e;n++)t+=a.charAt(Math.floor(Math.random()*a.length));return t}function _(){for(var e="0123456789ABCDEF".split(""),t="#",a=0;a<6;a++)t+=e[Math.floor(16*Math.random())];return t}function P(e){var t="https://api.cloudinary.com/v1_1/".concat("shaishar9","/image/upload"),a=new FormData;return a.append("file",e.target.files[0]),a.append("upload_preset","cgwfirgu"),y.a.post(t,a).then((function(e){return e.data.url})).catch((function(e){return console.error(e)}))}var F=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={user:{username:"",password:"",fullname:"",imgUrl:"",confirmPassword:""},isLogin:!1,msg:"",isUploadImg:!1,isFinishUpload:!1},e.setCurrPage=function(){var t="/login"===e.props.match.path;e.setState({isLogin:t})},e.onUploadImg=function(){var t=Object(v.a)(f.a.mark((function t(a){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({isUploadImg:!0}),t.next=3,P(a);case 3:n=t.sent,e.setState({isUploadImg:!1,isFinishUpload:!0}),e.timeoutFinishUpload=setTimeout((function(){e.setState({isFinishUpload:!1})}),2500),e.setState((function(e){return{user:Object(h.a)(Object(h.a)({},e.user),{},{imgUrl:n})}}));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState((function(e){return{user:Object(h.a)(Object(h.a)({},e.user),{},Object(g.a)({},n,r))}}))},e.handleUserSubmit=function(){var t=Object(v.a)(f.a.mark((function t(a){var n,r,c,s,o,i,l,u;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),n=e.state.user,r=n.username,c=n.password,s=n.fullname,o=n.imgUrl,i=n.confirmPassword,l=e.state.isLogin,r&&(c||i||!l)){t.next=5;break}return t.abrupt("return",e.setState({msg:"Please enter username and password"}));case 5:if(l||c===i){t.next=7;break}return t.abrupt("return",e.setState({msg:"Passwords don't match!"}));case 7:if(l||r||c||s){t.next=9;break}return t.abrupt("return",e.setState({msg:"Please enter username, password and full name"}));case 9:if(u={username:r,password:c,fullname:s,imgUrl:o},t.prev=10,!e.state.isLogin){t.next=16;break}return t.next=14,e.props.login(u);case 14:t.next=19;break;case 16:return u.bgColor=_(),t.next=19,e.props.signup(u);case 19:t.next=24;break;case 21:return t.prev=21,t.t0=t.catch(10),t.abrupt("return",e.setState({msg:t.t0}));case 24:e.props.history.push("/boards");case 25:case"end":return t.stop()}}),t,null,[[10,21]])})));return function(e){return t.apply(this,arguments)}}(),e.onOpenUpload=function(){e.inputElement.click()},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.setCurrPage()}},{key:"componentDidUpdate",value:function(e){e.match.params!==this.props.match.params&&(this.setState({msg:"",isUploadImg:!1,isFinishUpload:!1,user:{username:"",password:"",confirmPassword:"",fullname:"",imgUrl:""}}),this.setCurrPage())}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeoutFinishUpload)}},{key:"render",value:function(){var e=this,t=this.state,a=t.isLogin,n=t.msg,c=t.user,s=t.isUploadImg,o=t.isFinishUpload;return r.a.createElement("div",{className:"container flex column align-center"},r.a.createElement("div",{className:"form-container"},r.a.createElement("h2",{className:"form-title"},a?"Login":"Signup"),a&&r.a.createElement("div",{className:"signup-login-link"},r.a.createElement(m.a,{to:"/signup"},"Sign up for an account")),!a&&r.a.createElement("div",{className:"signup-login-link"},r.a.createElement(m.a,{to:"/login"},"Already have an account? Sign in")),o&&r.a.createElement("div",{className:"img-uploaded-msg flex align-center space-between"},"Your image was uploaded successfully! ",r.a.createElement("img",{src:"assets/img/success.png",className:"small-icon",alt:""})),r.a.createElement("form",{className:"login-signup-form flex column align-start",onSubmit:this.handleUserSubmit},r.a.createElement("input",{type:"text",onChange:this.handleChange,value:c.username,name:"username",autoComplete:"off",placeholder:"Username"}),!a&&r.a.createElement("input",{type:"text",onChange:this.handleChange,value:c.fullname,name:"fullname",autoComplete:"off",placeholder:"Full name"}),r.a.createElement("input",{type:"password",onChange:this.handleChange,value:c.password,name:"password",placeholder:"Password"}),!a&&r.a.createElement("input",{type:"password",onChange:this.handleChange,value:c.confirmPassword,name:"confirmPassword",placeholder:"Confirm password"}),!a&&r.a.createElement("input",{type:"file",ref:function(t){return e.inputElement=t},name:"imgUrl",onChange:this.onUploadImg,hidden:!0}),r.a.createElement("div",{className:"img-submit-container flex align-start space-between"},!a&&r.a.createElement("span",{className:"upload-img",onClick:function(){return e.onOpenUpload()}},"Upload Profile Image"),r.a.createElement("button",{className:"btn btn-success ".concat(s?"disable":""),disabled:s},a?"Login":"Signup"))),n&&r.a.createElement("div",{className:"user-msg flex align-center space-between"},n,r.a.createElement("img",{src:"assets/img/error-white.png",className:"small-icon",alt:""}))))}}]),a}(n.Component),W={signup:I,login:M},q=Object(E.b)((function(e){return{loggedInUser:e.user.loggedInUser}}),W)(F);function H(e){var t=e.board;return r.a.createElement(m.a,{to:"/boards/".concat(t._id)},r.a.createElement("section",{style:{backgroundColor:t.bg,backgroundImage:"url(".concat(t.bg,")")},className:"board-item"},r.a.createElement("h3",null,t.title)))}var G={query:function(e){return z.apply(this,arguments)},save:function(e){return X.apply(this,arguments)},remove:function(e){return Y.apply(this,arguments)},get:function(e){return V.apply(this,arguments)}};function z(){return(z=Object(v.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="?userId=".concat(t),e.next=3,w("".concat("boards").concat(a));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function V(){return(V=Object(v.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w("".concat("boards","/").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(){return(Y=Object(v.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S("".concat("boards","/").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(){return(X=Object(v.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t._id){e.next=6;break}return e.next=3,N("".concat("boards","/").concat(t._id),t);case 3:a=e.sent,e.next=9;break;case 6:return e.next=8,O("".concat("boards"),t);case 8:a=e.sent;case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var J,K=a(258),Q=a.n(K),Z={setup:function(){J=Q()("/")},terminate:function(){J=null},on:function(e,t){J.on(e,t)},off:function(e,t){J.off(e,t)},emit:function(e,t){J.emit(e,t)}};function $(e){return function(t){G.get(e).then((function(e){t({type:"SET_BOARD",board:e})}))}}function ee(e){return function(t){t({type:"SET_BOARD",board:e}),Z.emit("updateBoard",e),G.save(e)}}var te=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.bgs,a=e.type,n=e.changeBgColor;return r.a.createElement("ul",{className:"bg-color-list clean-list flex wrap"},t.map((function(e,t){return r.a.createElement("li",{key:t,className:"bg-color-li",onClick:function(){return n(e)},style:"color"===a?{backgroundColor:e}:{backgroundImage:"url(".concat(e,")"),backgroundSize:"cover"}})})))}}]),a}(r.a.Component),ae=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={board:{title:"",bg:"#122961"},bgColors:["blue","red","pink","black","yellow","#122961","#3867d6","#fed330","#eb3b5a"],bgImgs:["assets/img/bg-beach.jpg","assets/img/bg-flowers.jpg","assets/img/bg-sunset.jpg","assets/img/bg-view.jpg","assets/img/bg-view2.jpg","assets/img/bg-view3.jpg","assets/img/bg-view4.jpg","assets/img/bg-water.jpg","assets/img/bg-view5.jpg"],bgBy:"color"},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState((function(e){return{board:Object(h.a)(Object(h.a)({},e.board),{},Object(g.a)({},n,r))}}))},e.onHandleSubmit=function(t){t.preventDefault();var a=e.state.board;a.members=[e.props.loggedInUser],a.stacks=[],a.createdAt=Date.now(),a.createdBy=e.props.loggedInUser,a.activities=[],e.props.addBoard(a),e.setState({board:""}),e.props.onClose()},e.changeBgColor=function(t){e.setState((function(e){return{board:Object(h.a)(Object(h.a)({},e.board),{},{bg:t})}}))},e}return Object(i.a)(a,[{key:"onChangeBgBy",value:function(e){this.setState({bgBy:e})}},{key:"render",value:function(){var e=this,t=this.state,a=t.board,n=t.bgColors,c=t.bgImgs,s=t.bgBy,o=this.props.onClose;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"screen",onClick:o},r.a.createElement("div",{className:"add-board-container modal-container",onClick:function(e){return e.stopPropagation()},style:{backgroundColor:"unset",width:"fit-content"}},r.a.createElement("img",{src:"assets/img/close.png",onClick:o,className:"close-btn",alt:""}),r.a.createElement("form",{onSubmit:this.onHandleSubmit},r.a.createElement("div",{className:"main-form-container flex wrap"},r.a.createElement("div",{className:"main-form",style:{width:"unset",backgroundColor:a.bg,backgroundImage:"url(".concat(a.bg,")"),backgroundSize:"cover"}},r.a.createElement("div",{className:"main-form-header flex space-between"},r.a.createElement("h3",null,"Create Board")),r.a.createElement("input",{name:"title",className:"board-title",value:a.title,placeholder:"Add board title",onChange:this.handleChange,autoComplete:"off"}),r.a.createElement("div",{className:"bg-btns-container"},r.a.createElement(m.a,{className:"clean-link bg-btn",to:"#",onClick:function(){return e.onChangeBgBy("color")}},"Background Color"),r.a.createElement(m.a,{className:"clean-link bg-btn",to:"#",onClick:function(){return e.onChangeBgBy("image")}},"Background Image"))),r.a.createElement("div",{className:"bg-color-container flex "},r.a.createElement(te,{bgs:"color"===s?n:c,type:s,changeBgColor:this.changeBgColor}))),r.a.createElement("div",{className:"modal-footer flex justify-end"},r.a.createElement("button",{className:"create-board-btn btn btn-success"},"Create Board"))))))}}]),a}(r.a.Component),ne={addBoard:function(e){return function(t){G.save(e).then((function(e){return t({type:"ADD_BOARD",board:e})}))}}},re=Object(E.b)((function(e){return{loggedInUser:e.user.loggedInUser}}),ne)(ae),ce=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={isAddOpen:!1},e.toggleAddShown=function(){e.setState((function(e){return{isAddOpen:!e.isAddOpen}}))},e}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.state.isAddOpen&&r.a.createElement(re,{onClose:this.toggleAddShown}),r.a.createElement("div",{className:"boards-list justify-center flex wrap"},this.props.boards.map((function(e){return r.a.createElement(H,{key:e._id,board:e})})),r.a.createElement("button",{className:"add-new-board board-item",onClick:this.toggleAddShown},"Create new board")))}}]),a}(r.a.Component),se=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"componentDidMount",value:function(){if(!this.props.loggedInUser)return this.props.history.push("/boards");this.props.loadBoards(this.props.loggedInUser._id)}},{key:"render",value:function(){var e=this.props,t=e.loggedInUser,a=e.boards;return t?r.a.createElement("div",{className:"container flex justify-center"},r.a.createElement("div",{className:"form-container boards-page  align-center column"},r.a.createElement("header",{className:"boards-header wrap flex space-between"},r.a.createElement("h2",{className:"boards-title"},"My Boards"),r.a.createElement(m.a,{to:"/profile",className:"hello-btn"},"Hello ",t.username)),r.a.createElement(ce,{boards:a}))):"Loading..."}}]),a}(r.a.Component),oe={loadBoards:function(e){return function(t){G.query(e).then((function(e){return t({type:"SET_BOARDS",boards:e})}))}}},ie=Object(E.b)((function(e){return{boards:e.board.boards,loggedInUser:e.user.loggedInUser}}),oe)(se),le=a(64),ue=a(77),de=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={isOpen:!1,title:""},e.addItem=function(t){if(t.preventDefault(),t.target&&""!==t.target.name.value&&void 0!==t.target.name.value){var a=t.target.name.value,n=e.props.loggedInUser;switch(e.props.type){case"stack":e.props.currBoard.activities.unshift({id:L(),txt:"added new stack: ".concat(a),createdAt:Date.now(),byMember:n}),e.props.onStackAdd(a);break;case"card":e.props.currBoard.activities.unshift({id:L(),txt:"added new card: ".concat(a),createdAt:Date.now(),byMember:n});var r=e.props.itemId;e.props.onCardAdd(a,r)}e.setState({isOpen:!1,title:""})}},e.handleChange=function(t){var a=t.target.value;e.setState({title:a})},e.toggleOpen=function(t){t.preventDefault(),e.setState((function(e){return{isOpen:!e.isOpen}}))},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state,t=e.title,a=e.isOpen,n=this.props.type;return r.a.createElement("div",{className:"add-content-container flex align-start add-".concat(n),style:{padding:"stack"===n?"10px 20px":"7.5px 15px",fontSize:"stack"===n?16:14,color:"stack"===n?"#ffffff":"#888888",minWidth:"stack"===n?250:"100%",maxWidth:"stack"===n?250:"100%",borderTopLeftRadius:"stack"===n?3:0,borderTopRightRadius:"stack"===n?3:0}},a?r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:this.addItem,className:"add-content flex column align-start"},r.a.createElement("input",{name:"name",autoComplete:"off",onChange:this.handleChange,value:t,placeholder:"Enter ".concat(n," title..."),className:"input ".concat("stack"===n?"stack-input":"card-input"),style:{padding:"8px 12px"},autoFocus:!0}),r.a.createElement("span",{className:"add-content-buttons flex space-between"},r.a.createElement("button",{className:"btn btn-".concat("stack"===n?"primary":"success"," btn-small")},"Add ".concat(n)),r.a.createElement("img",{src:"/assets/img/close".concat("stack"===n?"-stack":"",".png"),onClick:this.toggleOpen,className:"close-add-icon",alt:""})))):r.a.createElement(r.a.Fragment,null,r.a.createElement(m.a,{to:"#",onClick:this.toggleOpen,className:"add-content-title"},"Add ".concat("stack"===n?"list":"card"))))}}]),a}(r.a.Component),me=Object(E.b)((function(e){return{currBoard:e.board.currBoard,loggedInUser:e.user.loggedInUser}}))(de),pe=a(29),ge=a.n(pe);function be(e){var t=e.card,a=e.innerRef,n=e.provided,c=e.style,s=e.labelsOpen,o="",i=0;t.checklists&&t.checklists.length&&(o=function(){var e=0;return t.checklists.forEach((function(t){i+=t.todos.length,t.todos.forEach((function(t){t.isDone&&(e+=1)}))})),"".concat(e,"/").concat(i)}());var l="";t.dueDate&&""!=t.dueDate&&(l="due-date-"+function(){var e=Date.now();return Date.parse(t.dueDate)>e?"future":"past"}());var u=t.comments.length||""!==t.description||i||""!==t.dueDate;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",Object.assign({className:"card-preview flex column align-center justify-center",onClick:function(){e.history.push(e.link)},ref:a,style:c},n.draggableProps,n.dragHandleProps),t.labels.length?r.a.createElement("div",{className:"card-labels flex wrap align-center",onClick:function(t){return t.stopPropagation(),void e.onToggleLabels()}},t.labels.map((function(e){return r.a.createElement("div",{className:"card-label flex align-center justify-center ".concat(s?"label-expand":""),key:e.title+t.id,style:{background:e.color}},s?e.title:"")}))):null,t.imgUrl&&r.a.createElement("img",{src:t.imgUrl,className:"card-img",alt:""}),r.a.createElement("p",{className:"card-preview-title ".concat(t.labels.length?"top-margin":"")},e.title),u?r.a.createElement("div",{className:"card-preview-info flex align-center space-start"},t.dueDate&&""!=t.dueDate?r.a.createElement("span",{className:"preview-info-span flex align-center due-date ".concat(l)},r.a.createElement("img",{className:"preview-info-img",src:"/assets/img/clock.png",alt:""}),r.a.createElement("p",{className:"preview-info-count"},ge()(t.dueDate).format("MMM DD"))):null,""!==t.description?r.a.createElement("span",{className:"preview-info-span flex align-center"},r.a.createElement("img",{className:"preview-info-img",src:"/assets/img/description.png",alt:""})):null,t.comments.length?r.a.createElement("span",{className:"preview-info-span flex align-center"},r.a.createElement("img",{className:"preview-info-img",src:"/assets/img/comment.png",alt:""}),r.a.createElement("p",{className:"preview-info-count"},t.comments.length)):null,t.checklists&&i?r.a.createElement("span",{className:"preview-info-span flex align-center"},r.a.createElement("img",{className:"preview-info-img",src:"/assets/img/todos.png",alt:""}),r.a.createElement("p",{className:"preview-info-count"},o)):null):null))}var fe=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.innerRef,a=e.provided,n=e.style,c=e.children;return r.a.createElement("div",Object.assign({className:"stack flex column space-start",ref:t,style:n},a.droppableProps),c)}}]),a}(r.a.Component);function he(e){return r.a.createElement("div",{className:"card-desc-container"},r.a.createElement("div",{className:"card-mini-title flex align-center"},r.a.createElement("img",{src:"/assets/img/description.png",alt:""}),r.a.createElement("label",{className:"card-txt-title",htmlFor:"cardDesc"},"Description:")),r.a.createElement("form",{className:"main-content-card-action",onSubmit:e.onSaveDesc},r.a.createElement("textarea",{name:"description",value:e.description,onChange:e.handleChange,onFocus:function(){return e.isShown(!0)},className:"card-desc",id:"cardDesc",placeholder:"Add your card descriptaion..."}),e.isSubmitShown&&r.a.createElement("div",{className:"desc-btns-container flex align-center"},r.a.createElement("button",{className:"btn btn-primary btn-save-desc"},"Save Changes"),r.a.createElement(m.a,{to:"#",className:"cancel-changes",onClick:function(){return e.isShown(!1,!0)}},r.a.createElement("img",{className:"close-btn-desc",src:"/assets/img/close.png",alt:""})))))}var ve=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card-mini-title flex align-center"},r.a.createElement("img",{src:"/assets/img/comment.png",alt:""}),r.a.createElement("label",{className:"card-txt-title",htmlFor:"cardComment"},"Comments:")),r.a.createElement("div",{className:"main-content-card-action"},r.a.createElement("form",{onSubmit:this.props.onAddComment},r.a.createElement("input",{name:"comment",className:"comment-input input",autoComplete:"off",onChange:this.props.handleChange,id:"cardComment",placeholder:"Your comment...",value:this.props.comment}),r.a.createElement("button",{className:"btn-primary comment-btn"},"Add Comment")),r.a.createElement("div",{className:"comments-container"},this.props.comments&&this.props.comments.map((function(t,a){return r.a.createElement("div",{className:"comment flex align-start column",key:a},r.a.createElement("div",{className:"flex align-center"},r.a.createElement("div",{className:"member flex justify-center align-center",style:{backgroundImage:"url(".concat(t.byMember.imgUrl,")"),backgroundColor:t.byMember.bgColor}},e.props.getTwoChars(t.byMember.fullname)),r.a.createElement("div",null,r.a.createElement("span",{className:"comment-title-fullname"},t.byMember.fullname),r.a.createElement("span",{className:"comment-title-time"},ge()(t.createdAt).fromNow()))),r.a.createElement("div",{className:"comment-txt"},t.txt),r.a.createElement(m.a,{className:"delete-comment",to:"#",onClick:function(){return e.props.removeComment(t)}},"Delete"))})))))}}]),a}(n.Component),Ee=a(271);a(366);function ke(e){var t=e.value?new Date(e.value):new Date;return r.a.createElement("div",null,r.a.createElement(Ee.a,{onChange:e.onChange,calendarType:"US",value:t,locale:"en-GB",name:"dueDate"}),r.a.createElement("div",{className:"btns-container flex space-between"},r.a.createElement("button",{className:"btn btn-primary",onClick:function(){e.onToggleAction("dueDate"),e.onSubmitDate()}},"Save"),r.a.createElement("button",{className:"btn btn-danger",onClick:function(){return e.removeDuedate()}},"Remove")))}var ye=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={labels:[{title:"done",color:"#61bd4f"},{title:"error",color:"#f2d600"},{title:"design",color:"#ff9f1a"},{title:"feature",color:"#eb5a46"},{title:"bug",color:"#c377e0"},{title:"warning",color:"#0079bf"}]},e.isLabelChecked=function(t){var a=e.props.getCurrCard();return a.labels||(a.labels=[]),!!a.labels.find((function(e){return t===e.title}))},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.addLabel,t=this.isLabelChecked;return r.a.createElement(r.a.Fragment,null,this.state.labels.map((function(a,n){return r.a.createElement("div",{key:n,className:"label-item flex space-between",style:{backgroundColor:a.color},onClick:function(){return e({title:a.title,color:a.color})}},a.title.charAt(0).toUpperCase()+a.title.slice(1)," ",t(a.title)?r.a.createElement("img",{src:"/assets/img/icon-checked-white.png",alt:""}):"")})))}}]),a}(n.Component),Ce=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={byMember:""},e.handleChange=function(t){var a=t.target.value;e.setState({byMember:a})},e.isMemberChecked=function(t){return!!e.props.getCurrCard().members.find((function(e){return t===e._id}))},e.getMembers=function(){var t=e.state.byMember;return t?e.props.board.members.filter((function(e){return e.username.includes(t)})):e.props.board.members},e}return Object(i.a)(a,[{key:"getTwoChars",value:function(e){var t;return(t=2!==e.split(" ").length?null===e||void 0===e?void 0:e.charAt(0):(null===e||void 0===e?void 0:e.charAt(0))+e.split(" ")[1].charAt(0))||(t=""),t}},{key:"render",value:function(){var e=this,t=this.props.addMember,a=this.getMembers;return r.a.createElement("div",{className:"card-members-container"},r.a.createElement("div",{className:"search-input"},r.a.createElement("input",{type:"text",className:"input search-members",value:this.state.byMember,autoComplete:"off",placeholder:"Search member",onChange:this.handleChange})),r.a.createElement("div",{className:"members-list-container"},r.a.createElement("h4",null,"BOARD MEMBERS"),r.a.createElement("div",{className:"members-list"},a().map((function(a){return r.a.createElement("div",{key:a._id,className:"member-item flex space-between align-center",onClick:function(){return t(a)}},r.a.createElement("div",{className:"flex align-center"},r.a.createElement("div",{className:"member flex justify-center align-center",style:{backgroundImage:"url(".concat(a.imgUrl,")"),backgroundColor:a.bgColor}},e.getTwoChars(a.fullname)),r.a.createElement("span",{className:"members-card-title"},a.username)),e.isMemberChecked(a._id)?r.a.createElement("img",{src:"/assets/img/icon-checked.png"}):"")})))))}}]),a}(r.a.Component),we=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={selectIsShown:!1},e.onToggleSelect=function(){e.setState((function(e){return{selectIsShown:!e.selectIsShown}}))},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.card,n=t.board,c=this.state.selectIsShown;return r.a.createElement("div",{className:"card-move-container"},r.a.createElement("h4",null,"SELECT DESTINATION"),r.a.createElement("div",{className:"select-stack",onClick:this.onToggleSelect},"Select stack"),c&&r.a.createElement("div",{className:"selection-container"},n.stacks.map((function(t,n){return t.cards.find((function(e){return e.id===a.id}))?null:r.a.createElement("div",{key:n,className:"option-stack-name",onClick:function(){return e.props.moveCardToStack(t)}},t.title)}))))}}]),a}(r.a.Component),Oe=a(75),Ne=a.n(Oe),Se=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={action:null},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.checkAction()}},{key:"checkAction",value:function(){var e=this.props.isShown;for(var t in e)e[t]&&this.setState({action:t})}},{key:"titleToReturn",value:function(e){switch(e){case"dueDate":return"Change Due Date";case"label":return"Labels";case"members":return"Members";case"move":return"Move"}}},{key:"render",value:function(){var e=this.props,t=e.isShown,a=e.card,n=e.onToggleAction,c=e.board,s=e.onChange,o=e.value,i=e.onSubmitDate,l=e.getCurrCard,u=e.addLabel,d=e.addMember,m=e.removeDueDate,p=e.moveCardToStack,g=this.state.action;return r.a.createElement(Ne.a,{onOutsideClick:function(){return n(g)},display:"contents"},r.a.createElement("div",{className:"labels-container"},r.a.createElement("div",{className:"labels-header flex space-between"},r.a.createElement("h3",null,this.titleToReturn(g)),r.a.createElement("button",{className:"close-label",onClick:function(){return n(g)}},"X")),t.dueDate&&r.a.createElement(ke,{onChange:s,value:o,onToggleAction:n,removeDueDate:m,onSubmitDate:i}),t.label&&r.a.createElement(ye,{addLabel:u,getCurrCard:l}),t.members&&r.a.createElement(Ce,{board:c,getCurrCard:l,card:a,addMember:d}),t.move&&r.a.createElement(we,{board:c,card:a,moveCardToStack:p})))}}]),a}(n.Component),je=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={newTodo:{title:"",isDone:!1}},e.onEditChecklistTitle=function(t){var a=t.target.value;e.props.onEditChecklistTitle(e.props.checklist.id,a)},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState((function(e){return{newTodo:Object(h.a)(Object(h.a)({},e.newTodo),{},Object(g.a)({},n,r))}}))},e.onAddTodo=function(t){t.preventDefault(),e.props.addTodo(e.props.checklist.id,e.state.newTodo),e.setState({newTodo:{title:"",isDone:!1}})},e.onUpdateTodo=function(t,a){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=t.target,c=r.name,s=r.value;n&&(a.isDone=!a.isDone);var o=Object(h.a)(Object(h.a)({},a),{},Object(g.a)({},c,s));e.props.addTodo(e.props.checklist.id,o)},e.calculateProgBarWidth=function(){var t=0;return e.props.checklist.todos.forEach((function(e){e.isDone&&t++})),e.props.checklist.todos.length?(t/e.props.checklist.todos.length*100).toFixed(0):0},e.calculateProgBarBgc=function(){return"100"===e.calculateProgBarWidth()?"#61bd4f":"#0079bf"},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props.checklist,a=t.title,n=t.todos,c=t.id,s=this.calculateProgBarWidth(),o=this.calculateProgBarBgc();return r.a.createElement("div",{className:"card-checklist-container"},r.a.createElement("div",{className:"card-checklist-title flex align-center"},r.a.createElement("img",{src:"/assets/img/todos.png"}),r.a.createElement("input",{type:"text",name:"title",className:"checklist-title",autoComplete:"off",onChange:this.onEditChecklistTitle,value:a}),r.a.createElement("button",{className:"btn btn-delete",onClick:function(){return e.props.onRemoveChecklist(e.props.checklist)}},"Delete")),r.a.createElement("div",{className:"checklist-main"},r.a.createElement("div",{className:"checklist-progress-bar-container"},r.a.createElement("span",null,"".concat(s,"%")),r.a.createElement("div",{className:"checklist-progress-bar"},r.a.createElement("div",{className:"progress-bar",style:{width:"".concat(s,"%"),backgroundColor:"".concat(o)}}))),r.a.createElement("div",{className:"checklist-todos-container"},n.map((function(t){return r.a.createElement("div",{className:"flex align-center todo-item space-between",key:t.id},r.a.createElement("div",{className:"flex align-center"},r.a.createElement("div",{className:t.isDone?"checkbox done":"checkbox",onClick:function(a){return e.onUpdateTodo(a,t,!0)}}),r.a.createElement("input",{name:"title",className:"checklist-title todo-title ".concat(t.isDone?"done-decoration":"d"),value:t.title,onChange:function(a){return e.onUpdateTodo(a,t)}})),r.a.createElement("div",{className:"todo-delete-btn-container"},r.a.createElement("img",{className:"todo-delete-btn",src:"/assets/img/close.png",onClick:function(){return e.props.onRemoveTodo(c,t)}})))})),r.a.createElement("form",{onSubmit:this.onAddTodo},r.a.createElement("input",{type:"text",name:"title",className:"checklist-title todo-title add-todo",onChange:this.handleChange,placeholder:"Add New Todo",autoComplete:"off",value:this.state.newTodo.title})))))}}]),a}(r.a.Component);function xe(e){var t=e.card,a=e.getTwoChars;return r.a.createElement(r.a.Fragment,null,(0!==t.members.length||0!==t.labels.length||t.dueDate)&&r.a.createElement("div",{className:"members-labels-container flex wrap"},0!==t.members.length&&r.a.createElement("div",{className:"member-card-container"},r.a.createElement("h3",null,"Members"),r.a.createElement("div",{className:"flex wrap"},t.members.map((function(e,t){return r.a.createElement("div",{key:t,className:"member flex justify-center align-center",style:{backgroundImage:"url(".concat(e.imgUrl,")"),backgroundColor:e.bgColor}},a(e.fullname))})))),0!==t.labels.length&&r.a.createElement("div",{className:"labels-card-container"},r.a.createElement("h3",null,"Labels"),r.a.createElement("div",{className:" flex wrap"},t.labels.map((function(e,t){return r.a.createElement("div",{key:t,className:"card-label-item",style:{backgroundColor:"".concat(e.color)}},e.title)})))),t.dueDate&&r.a.createElement("div",{className:"due-date-container"},r.a.createElement("h3",null,"Due date"),r.a.createElement("div",{className:"flex time-container"},ge()(t.dueDate).format("MMM DD")," at ",ge()(t.dueDate).format("hh:mm")))))}function De(e){return r.a.createElement("div",{className:"card-img-container"},r.a.createElement("div",{className:"card-mini-title flex align-center space-between"},r.a.createElement("div",null,r.a.createElement("img",{src:"/assets/img/style.png"}),r.a.createElement("label",{className:"card-txt-title"},"Image:")),r.a.createElement("button",{className:"btn btn-delete",onClick:function(){return e.onRemoveImg()}},"Delete")),r.a.createElement("div",{className:"card-img"},e.isUploadImg?r.a.createElement("div",{className:"loading"},r.a.createElement("div",{className:"dot"}),r.a.createElement("div",{className:"dot"}),r.a.createElement("div",{className:"dot"}),r.a.createElement("div",{className:"dot"}),r.a.createElement("div",{className:"dot"})):r.a.createElement("img",{src:"".concat(e.card.imgUrl)})))}function Be(e){return r.a.createElement("div",{className:"remove-board-container remove-card"},r.a.createElement("div",{className:"remove-board-title remove-card-title flex align-center space-between"},"Remove card",r.a.createElement("img",{src:"/assets/img/close.png",className:"close-icon",onClick:function(){return e.onToggleRemoveCard()},alt:""})),r.a.createElement("p",null,"Are you sure?"),r.a.createElement("button",{className:"btn btn-danger btn-remove-card",onClick:function(){return e.onRemoveCard()}},"Yes, remove!"))}function Ue(e){var t=e.activities;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card-mini-title flex align-center"},r.a.createElement("img",{src:"/assets/img/activity.png"}),r.a.createElement("span",{className:"card-txt-title",htmlFor:"cardComment"},"Activity:")),r.a.createElement("div",{className:"main-content-card-action"},r.a.createElement("div",{className:"comments-container"},t&&t.map((function(t,a){return r.a.createElement("div",{className:"comment flex align-start column",key:a},r.a.createElement("div",{className:"flex align-center"},r.a.createElement("div",{className:"member flex justify-center align-center",style:{backgroundImage:"url(".concat(t.byMember.imgUrl,")"),backgroundColor:t.byMember.bgColor}},e.getTwoChars(t.byMember.fullname)),r.a.createElement("div",{className:"flex align-center"},r.a.createElement("span",{className:"comment-title-fullname"},t.byMember.fullname),r.a.createElement("div",{className:"activity-txt"},t.txt))),r.a.createElement("span",{className:"comment-title-time activity-time"},ge()(t.createdAt).fromNow()))})))))}var Te=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={card:null,prevCardDesc:"",isShown:{label:!1,dueDate:!1,members:!1,move:!1},comment:{txt:""},isUploadImg:!1,isFinishUpload:!1,isOpenModalRemove:!1,dueDateNotSave:""},e.loadCard=function(){var t=e.getCurrCard();e.setState({card:t},(function(){return e.setState({prevCardDesc:e.state.card.description})}))},e.getCurrCard=function(){var t,a=e.props.match.params.cardId;return e.props.currBoard.stacks.some((function(e){return t=e.cards.find((function(e){return e.id===a}))})),t||e.props.history.push("/boards")},e.onDescShown=function(t,a){e.setState({isDescShown:t}),!t&&a&&e.setPrevDesc()},e.setPrevDesc=function(){e.setState((function(t){return{card:Object(h.a)(Object(h.a)({},t.card),{},{description:e.state.prevCardDesc})}}))},e.onBackBoard=function(t){var a=e.props.match.params.boardId;e.props.history.push("/boards/".concat(a))},e.onChangeDate=function(t){e.setState({dueDateNotSave:t})},e.onSubmitDate=function(){var t=e.props,a=t.currBoard,n=t.loggedInUser;a.activities.unshift({id:L(),txt:"set card due date to \n        ".concat(ge()(e.state.dueDateNotSave).format("MMM DD")),createdAt:Date.now(),byMember:n}),e.state.card.activities.unshift({id:L(),txt:"set card due date to \n        ".concat(ge()(e.state.dueDateNotSave).format("MMM DD")),createdAt:Date.now(),byMember:n}),e.setState((function(t){return{card:Object(h.a)(Object(h.a)({},t.card),{},{dueDate:e.state.dueDateNotSave})}}),(function(){e.props.saveCard(e.state.card)}))},e.removeDueDate=function(){e.setState((function(e){return{card:Object(h.a)(Object(h.a)({},e.card),{},{dueDate:""})}}),(function(){return e.props.saveCard(e.state.card)}))},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState((function(e){return{card:Object(h.a)(Object(h.a)({},e.card),{},Object(g.a)({},n,r))}}))},e.handleCommentChange=function(t){var a=t.target;e.setState((function(e){return{comment:Object(h.a)(Object(h.a)({},e.comment),{},{txt:a.value})}}))},e.onAddComment=function(t){t.preventDefault();var a=e.state,n=a.comment,r=a.card;n.txt&&(n.id=L(),n.createdAt=Date.now(),n.byMember=e.props.loggedInUser,e.setState((function(e){return{card:Object(h.a)(Object(h.a)({},e.card),{},{comments:[n].concat(Object(le.a)(e.card.comments))})}}),(function(){e.props.saveCard(e.state.card)})),r.activities.unshift({id:L(),txt:"set card comment to ".concat(n.txt),createdAt:Date.now(),byMember:e.props.loggedInUser}),e.setState({comment:{txt:""}}))},e.removeComment=function(t){e.setState((function(e){return{card:Object(h.a)(Object(h.a)({},e.card),{},{comments:e.card.comments.filter((function(e){return e.id!==t.id}))})}}),(function(){e.props.saveCard(e.state.card)})),e.state.card.activities.unshift({id:L(),txt:"removed card comment ".concat(t.txt),createdAt:Date.now(),byMember:e.props.loggedInUser})},e.onEditTitle=function(t){var a=t.target;e.setState((function(e){return{card:Object(h.a)(Object(h.a)({},e.card),{},{title:a.value})}}),(function(){e.state.card.activities.unshift({id:L(),txt:"edited card title to ".concat(e.state.card.title),createdAt:Date.now(),byMember:e.props.loggedInUser}),e.props.saveCard(e.state.card)}))},e.onSaveDesc=function(t){t.preventDefault(),e.setState({prevCardDesc:e.state.card.description},(function(){e.state.card.activities.unshift({id:L(),txt:"edited card description to ".concat(e.state.card.description),createdAt:Date.now(),byMember:e.props.loggedInUser}),e.props.saveCard(e.state.card),e.onDescShown(!1)}))},e.onAddLabel=function(t){var a=e.getCurrCard(),n=a.labels.findIndex((function(e){return e.title===t.title}));-1===n?(e.state.card.activities.unshift({id:L(),txt:"add label: ".concat(t.title," to the card"),createdAt:Date.now(),byMember:e.props.loggedInUser}),a.labels.push(t)):(e.state.card.activities.unshift({id:L(),txt:"removed label: ".concat(t.title," from the card"),createdAt:Date.now(),byMember:e.props.loggedInUser}),a.labels.splice(n,1)),e.setState({card:a},(function(){e.props.saveCard(e.state.card)}))},e.onAddMember=function(t){var a=e.getCurrCard(),n=a.members.findIndex((function(e){return e._id===t._id}));-1===n?(e.state.card.activities.unshift({id:L(),txt:"add member:  ".concat(t.username," to the card"),createdAt:Date.now(),byMember:e.props.loggedInUser}),a.members.push(t)):(e.state.card.activities.unshift({id:L(),txt:"removed member:  ".concat(t.username," from the card"),createdAt:Date.now(),byMember:e.props.loggedInUser}),a.members.splice(n,1)),e.setState({card:a},(function(){e.props.saveCard(e.state.card)}))},e.onAddChecklist=function(){var t={id:L(),title:"Checklist",todos:[]};e.setState((function(e){return{card:Object(h.a)(Object(h.a)({},e.card),{},{checklists:[].concat(Object(le.a)(e.card.checklists),[t])})}}),(function(){e.state.card.activities.unshift({id:L(),txt:"added checklist to the card",createdAt:Date.now(),byMember:e.props.loggedInUser}),e.props.saveCard(e.state.card)}))},e.onEditChecklistTitle=function(t,a){e.setState((function(e){return{card:Object(h.a)(Object(h.a)({},e.card),{},{checklists:e.card.checklists.map((function(e){return e.id===t&&(e.title=a),e}))})}}),(function(){e.state.card.activities.unshift({id:L(),txt:"has edited checklist title card to ".concat(a),createdAt:Date.now(),byMember:e.props.loggedInUser}),e.props.saveCard(e.state.card)}))},e.onAddTodo=function(t,a){e.setState((function(e){return{card:Object(h.a)(Object(h.a)({},e.card),{},{checklists:e.card.checklists.map((function(e){return e.id===t&&(a.id?e.todos=e.todos.map((function(e){return e.id===a.id?a:e})):(e.todos.push(a),a.id=L())),e}))})}}),(function(){e.state.card.activities.unshift({id:L(),txt:"added todo ".concat(a.title," to the card"),createdAt:Date.now(),byMember:e.props.loggedInUser}),e.props.saveCard(e.state.card)}))},e.onRemoveTodo=function(t,a){e.setState((function(e){return{card:Object(h.a)(Object(h.a)({},e.card),{},{checklists:e.card.checklists.map((function(e){return e.id===t&&(e.todos=e.todos.filter((function(e){return e.id!==a.id}))),e}))})}}),(function(){e.state.card.activities.unshift({id:L(),txt:"removed todo ".concat(a.title," from the card"),createdAt:Date.now(),byMember:e.props.loggedInUser}),e.props.saveCard(e.state.card)}))},e.onRemoveChecklist=function(t){e.setState((function(e){return{card:Object(h.a)(Object(h.a)({},e.card),{},{checklists:e.card.checklists.filter((function(e){return e.id!==t.id}))})}}),(function(){e.state.card.activities.unshift({id:L(),txt:"removed checklist ".concat(t.title," from the card"),createdAt:Date.now(),byMember:e.props.loggedInUser}),e.props.saveCard(e.state.card)}))},e.onToggleAction=function(t){var a=e.state.isShown;for(var n in a)n!==t&&(a[n]=!1);a[t]=!a[t],e.setState({isShown:a})},e.onOpenUpload=function(){e.inputElement.click()},e.onUploadImg=function(){var t=Object(v.a)(f.a.mark((function t(a){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({isUploadImg:!0}),t.next=3,P(a);case 3:n=t.sent,e.setState({isUploadImg:!1,isFinishUpload:!0}),e.setState((function(e){return{card:Object(h.a)(Object(h.a)({},e.card),{},{imgUrl:n})}}),(function(){e.state.card.activities.unshift({id:L(),txt:"uploaded image to the card",createdAt:Date.now(),byMember:e.props.loggedInUser}),e.props.saveCard(e.state.card)}));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onRemoveImg=function(){e.setState((function(e){return{card:Object(h.a)(Object(h.a)({},e.card),{},{imgUrl:null})}}),(function(){e.state.card.activities.unshift({id:L(),txt:"removed image from the card",createdAt:Date.now(),byMember:e.props.loggedInUser}),e.props.saveCard(e.state.card)}))},e.moveCardToStack=function(t){e.props.currBoard.stacks.forEach((function(a){var n=a.cards.findIndex((function(t){return t.id===e.state.card.id}));-1!==n&&a.cards.splice(n,1),a.title===t.title&&a.cards.push(e.state.card)})),e.state.card.activities.unshift({id:L(),txt:"moved card to stack ".concat(t.title),createdAt:Date.now(),byMember:e.props.loggedInUser}),e.props.save(e.props.currBoard)},e.onToggleRemoveCard=function(){e.setState((function(e){return{isOpenModalRemove:!e.isOpenModalRemove}}))},e.onRemoveCard=function(){var t=e.props,a=t.currBoard,n=t.save,r=t.history,c=t.loggedInUser;a.stacks.forEach((function(t){var a=t.cards.findIndex((function(t){return t.id===e.state.card.id}));-1!==a&&t.cards.splice(a,1)})),a.activities.unshift({id:L(),txt:"has removed a card",createdAt:Date.now(),byMember:c}),n(e.props.currBoard),r.push("/boards/".concat(e.props.currBoard._id))},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.props.currBoard&&this.loadCard()}},{key:"componentDidUpdate",value:function(e){this.props.currBoard!==e.currBoard&&this.loadCard()}},{key:"getTwoChars",value:function(e){var t;return(t=2!==e.split(" ").length?null===e||void 0===e?void 0:e.charAt(0):(null===e||void 0===e?void 0:e.charAt(0))+e.split(" ")[1].charAt(0))||(t=""),t}},{key:"render",value:function(){var e=this,t=this.state,a=t.card,n=t.isDescShown,c=t.comment,s=t.isShown,o=t.isUploadImg,i=t.isOpenModalRemove,l=this.onToggleAction;return a?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"screen",onMouseDown:this.onBackBoard},r.a.createElement("div",{className:"modal-container shadow-drop-2-center card-details-modal",onMouseDown:function(e){return e.stopPropagation()}},r.a.createElement("div",{className:"modal-header flex align-center space-between"},r.a.createElement("div",{className:"flex align-center"},r.a.createElement("img",{className:"img-icon",src:"/assets/img/task.png",alt:""}),r.a.createElement("input",{type:"text",name:"title",className:"card-title",onChange:this.onEditTitle,value:a.title})),r.a.createElement("div",{className:"close-modal flex justify-content align-center",onClick:this.onBackBoard},r.a.createElement("img",{className:"img-icon",src:"/assets/img/close.png",alt:""}))),r.a.createElement("div",{className:"card-container flex"},r.a.createElement("aside",{className:"card-content"},r.a.createElement(xe,{card:a,getTwoChars:this.getTwoChars}),r.a.createElement(he,{description:a.description,onSaveDesc:this.onSaveDesc,handleChange:this.handleChange,isShown:this.onDescShown,isSubmitShown:n}),(o||a.imgUrl)&&r.a.createElement(De,{card:a,isUploadImg:o,onRemoveImg:this.onRemoveImg}),a.checklists&&a.checklists.map((function(t){return r.a.createElement(je,{key:t.id,checklist:t,addTodo:e.onAddTodo,onEditChecklistTitle:e.onEditChecklistTitle,onRemoveTodo:e.onRemoveTodo,onRemoveChecklist:e.onRemoveChecklist})})),r.a.createElement(ve,{comments:a.comments,onAddComment:this.onAddComment,handleChange:this.handleCommentChange,comment:c.txt,getTwoChars:this.getTwoChars,removeComment:this.removeComment}),a.activities&&r.a.createElement(Ue,{activities:a.activities,getTwoChars:this.getTwoChars})),r.a.createElement("aside",{className:"card-actions"},r.a.createElement("div",{className:"actions-title"},"Actions:"),r.a.createElement("ul",{className:"actions-list clean-list"},r.a.createElement(m.a,{title:"Edit Card Members",to:"#",onClick:function(){return l("members")}},r.a.createElement("li",null,r.a.createElement("img",{src:"/assets/img/user-icon.png",alt:""}),"Members")),r.a.createElement(m.a,{title:"Edit Card Labels",to:"#",onClick:function(){return l("label")}},r.a.createElement("li",null,r.a.createElement("img",{src:"/assets/img/label-icon.png",alt:""}),"Labels")),r.a.createElement(m.a,{title:"Add Checklist",to:"#",onClick:this.onAddChecklist},r.a.createElement("li",null,r.a.createElement("img",{src:"/assets/img/checklist-icon.png",alt:""}),"Checklist")),r.a.createElement(m.a,{title:"Set Due Date",to:"#",onClick:function(){return l("dueDate")}},r.a.createElement("li",null,r.a.createElement("img",{src:"/assets/img/clock-icon.png",alt:""}),"Due Date")),r.a.createElement(m.a,{title:"Add Image",to:"#",onClick:function(){return e.onOpenUpload()}},r.a.createElement("li",null,r.a.createElement("img",{src:"/assets/img/style.png",alt:""}),"Add Image")),r.a.createElement("input",{type:"file",ref:function(t){return e.inputElement=t},name:"imgUrl",onChange:this.onUploadImg,hidden:!0}),r.a.createElement(m.a,{title:"Move Card",to:"#",onClick:function(){return e.onToggleAction("move")}},r.a.createElement("li",null,r.a.createElement("img",{src:"/assets/img/back.png",className:"img-rotate",alt:""}),"Move Card")),r.a.createElement(m.a,{title:"Remove Card",to:"#",onClick:this.onToggleRemoveCard},r.a.createElement("li",{className:"li-last-child"},r.a.createElement("img",{src:"/assets/img/trash-white.png",alt:""}),"Remove Card")),s.dueDate&&r.a.createElement(Se,{isShown:s,onChange:this.onChangeDate,onSubmitDate:this.onSubmitDate,onToggleAction:l,value:a.dueDate,removeDuedate:this.removeDuedate}),s.label&&r.a.createElement(Se,{isShown:s,addLabel:this.onAddLabel,onToggleAction:l,getCurrCard:this.getCurrCard}),s.members&&r.a.createElement(Se,{board:this.props.currBoard,isShown:s,card:a,addMember:this.onAddMember,onToggleAction:l,getCurrCard:this.getCurrCard}),s.move&&r.a.createElement(Se,{board:this.props.currBoard,isShown:s,card:a,onToggleAction:l,moveCardToStack:this.moveCardToStack})),i&&r.a.createElement(Be,{onToggleRemoveCard:this.onToggleRemoveCard,onRemoveCard:this.onRemoveCard})))))):"Loading..."}}]),a}(n.Component),Ae={save:ee,loadBoard:$,saveCard:function(e){return function(t,a){t({type:"SET_CARD",card:e}),Z.emit("updateBoard",a().board.currBoard),G.save(a().board.currBoard)}}},Me=Object(E.b)((function(e){return{currBoard:e.board.currBoard,loggedInUser:e.user.loggedInUser}}),Ae)(Te),Ie=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={filterBy:{board:null,q:""}},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState((function(e){return{filterBy:Object(h.a)(Object(h.a)({},e.filterBy),{},Object(g.a)({},n,r))}}),(function(){e.props.loadUsers(e.state.filterBy)}))},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.setState({filterBy:{board:this.props.currBoard,q:""}},(function(){return e.props.loadUsers(e.state.filterBy)}))}},{key:"render",value:function(){var e=this.props,t=e.users,a=e.onClose,n=e.onAddMember,c=this.state.filterBy;return t?r.a.createElement(Ne.a,{onOutsideClick:function(){return a()},display:"contents"},r.a.createElement("div",{className:"add-member-container slide-bottom"},r.a.createElement("div",{className:"add-member-title flex space-between align-center"},"Add Members",r.a.createElement("img",{src:"/assets/img/close-white.png",className:"close-icon",onClick:function(){return a()},alt:""})),r.a.createElement("input",{type:"text",placeholder:"Enter user name",autoComplete:"off",name:"q",value:c.q,onChange:this.handleChange,className:"add-member-input"}),r.a.createElement("div",{className:"members-list flex column"},t.map((function(e,t){return r.a.createElement(m.a,{to:"#",key:t,onClick:function(){return n(e)},className:"single-member"},e.username)}))))):"Loading..."}}]),a}(n.Component),Re={loadUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(){var t=Object(v.a)(f.a.mark((function t(a){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,D.query(e);case 3:n=t.sent,a({type:"LOAD_USERS",users:n}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("userActions: cannot load users!",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}},Le=Object(E.b)((function(e){return{users:e.user.users,currBoard:e.board.currBoard}}),Re)(Ie);function _e(e){var t=e.type,a=e.onSetBg;return"image"===t?r.a.createElement("div",{className:"backgrounds-container flex even wrap"},["/assets/img/bg-beach.jpg","/assets/img/bg-flowers.jpg","/assets/img/bg-sunset.jpg","/assets/img/bg-view.jpg","/assets/img/bg-view2.jpg","/assets/img/bg-view3.jpg","/assets/img/bg-view4.jpg","/assets/img/bg-water.jpg","/assets/img/bg-view5.jpg"].map((function(e,t){return r.a.createElement("div",{key:t,className:"background",onClick:function(){return a(e,"img")},style:{backgroundImage:"url(".concat(e,")"),backgroundSize:"100%",backgroundPosition:"center"}})}))):r.a.createElement("div",{className:"backgrounds-container flex even wrap"},["blue","red","pink","black","yellow","#122961","#3867d6","#fed330","#eb3b5a"].map((function(e,t){return r.a.createElement("div",{key:t,className:"background",onClick:function(){return a(e,"color")},style:{backgroundColor:e}})})))}var Pe=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={bgChooseShown:""},e.setBgShown=function(t){e.setState({bgChooseShown:t})},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.state.bgChooseShown,a=this.props.onSetBg;return r.a.createElement("div",{className:"board-styling-container"},r.a.createElement("div",{className:"board-styling-title flex align-center"},t&&r.a.createElement("img",{src:"/assets/img/back.png",onClick:function(){return e.setBgShown("")},className:"back small-icon",alt:""}),"Board Styling"),!t&&r.a.createElement("button",{onClick:function(){return e.setBgShown("color")},className:"background-choose color-choose"},r.a.createElement("span",null,"Background Color")),!t&&r.a.createElement("button",{onClick:function(){return e.setBgShown("image")},className:"background-choose img-choose"},r.a.createElement("span",null,"Background Image")),t&&r.a.createElement(_e,{onSetBg:a,type:t}))}}]),a}(n.Component),Fe={save:ee,loadBoard:$},We=Object(E.b)((function(e){return{currBoard:e.board.currBoard}}),Fe)(Pe);function qe(e){var t=e.board;return r.a.createElement("div",{className:"activities-container"},r.a.createElement("h2",{className:"activities-title"},"Activities"),r.a.createElement("ul",{className:"activities clean-list"},t.activities.map((function(e,t){return r.a.createElement("li",{key:t},r.a.createElement("span",{className:"bold"},e.byMember.username)," ",e.txt,r.a.createElement("p",{className:"activity-at"},ge()(e.createdAt).fromNow()))}))))}function He(e){return r.a.createElement("div",{className:"remove-board-container"},r.a.createElement("div",{className:"remove-board-title flex align-center space-between"},"Remove board",r.a.createElement("img",{src:"/assets/img/close.png",className:"close-icon",onClick:function(){return e.onToggleRemoveBoard()},alt:""})),r.a.createElement("p",null,"Are you sure you want to remove the board?"),r.a.createElement("button",{className:"btn btn-danger",onClick:function(){return e.onRemoveBoard()}},"Yes, remove!"))}var Ge=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={isStylingShown:!1,isRemoveBoardShown:!1},e.onToggleStyling=function(){return e.setState((function(e){return{isStylingShown:!e.isStylingShown}}))},e.onToggleRemoveBoard=function(){return e.setState((function(e){return{isRemoveBoardShown:!e.isRemoveBoardShown}}))},e.onRemoveBoard=Object(v.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.removeBoard(e.props.board._id);case 2:e.props.history.push("/boards");case 3:case"end":return t.stop()}}),t)}))),e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.onClose,a=e.onSetBg,n=e.board,c=this.state,s=c.isStylingShown,o=c.isRemoveBoardShown;return r.a.createElement(Ne.a,{onOutsideClick:function(){return t()},display:"contents"},r.a.createElement("div",{className:"board-menu-container"},r.a.createElement("div",{className:"board-menu-title flex space-between align-center"},"Board Managment",r.a.createElement("img",{src:"/assets/img/close-white.png",className:"close-icon",onClick:function(){return t()},alt:""})),r.a.createElement("div",{className:"board-menu-content"},!s&&r.a.createElement("ul",{className:"board-menu-list clean-list"},r.a.createElement(m.a,{to:"#",onClick:this.onToggleStyling},r.a.createElement("li",null,r.a.createElement("img",{src:"/assets/img/style.png",className:"small-icon",alt:""}),"Board Styling")),r.a.createElement(m.a,{to:"/boards/".concat(n._id,"/statistics"),onClick:function(){return t()}},r.a.createElement("li",null,r.a.createElement("img",{src:"/assets/img/stats.png",className:"small-icon",alt:""}),"Show Board Statistics")),r.a.createElement(m.a,{to:"#",onClick:this.onToggleRemoveBoard},r.a.createElement("li",{className:"remove-board"},r.a.createElement("img",{src:"/assets/img/trash.png",className:"small-icon",alt:""}),"Remove Board"))),o&&r.a.createElement(He,{onToggleRemoveBoard:this.onToggleRemoveBoard,onRemoveBoard:this.onRemoveBoard}),!s&&r.a.createElement(qe,{board:n}),s&&r.a.createElement(We,{onSetBg:a,onToggleStyling:this.onToggleStyling}))))}}]),a}(n.Component),ze={removeBoard:function(e){return function(t){return G.remove(e).then((function(){t({type:"REMOVE_BOARD",boardId:e})}))}}},Ve=Object(E.b)(null,ze)(Ge),Ye=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={isAddMemberShown:!1,isBoardMenuShown:!1,currBoard:null},e.onToggleAddMember=function(){return e.setState((function(e){return{isAddMemberShown:!e.isAddMemberShown}}))},e.onToggleBoardMenu=function(){return e.setState((function(e){return{isBoardMenuShown:!e.isBoardMenuShown}}))},e.onAddMember=function(t){var a=e.props,n=a.loggedInUser,r=a.currBoard;r.members.unshift(t),r.activities.unshift({id:L(),txt:"added ".concat(t.username," to the board"),createdAt:Date.now(),byMember:n}),e.props.save(r),e.onToggleAddMember()},e.onRemoveMember=function(t){var a=e.props,n=a.loggedInUser,r=a.currBoard,c=r.members.findIndex((function(e){return t._id===e._id}));r.members.splice(c,1),r.activities.unshift({id:L(),txt:"removed ".concat(t.username," from the board"),createdAt:Date.now(),byMember:n}),e.props.save(r),e.setState({currBoard:r})},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.setState({currBoard:this.props.currBoard})}},{key:"getTwoChars",value:function(e){var t;return(t=2!==e.split(" ").length?null===e||void 0===e?void 0:e.charAt(0):(null===e||void 0===e?void 0:e.charAt(0))+e.split(" ")[1].charAt(0))||(t=""),t}},{key:"render",value:function(){var e=this,t=this.props,a=t.board,n=t.onSetBg,c=t.history,s=this.state,o=s.isAddMemberShown,i=s.isBoardMenuShown;return r.a.createElement("div",{className:"board-options-container flex align-center space-between"},r.a.createElement("div",{className:"board-title"},a.title),r.a.createElement("div",{className:"board-members flex"},a.members.map((function(t,a){return r.a.createElement("div",{key:a,className:"member flex justify-center align-center",style:{backgroundImage:"url(".concat(t.imgUrl,")"),backgroundColor:t.bgColor}},r.a.createElement("img",{onClick:function(){return e.onRemoveMember(t)},src:"/assets/img/close.png",className:"remove-member",alt:""}),e.getTwoChars(t.fullname))}))),r.a.createElement("div",{className:"board-options flex"},r.a.createElement("button",{className:"option flex align-center",onClick:function(){return e.onToggleAddMember()}},r.a.createElement("img",{src:"/assets/img/add-user.png",alt:""})),r.a.createElement("button",{className:"option flex align-center",onClick:function(){return e.onToggleBoardMenu()}},r.a.createElement("img",{src:"/assets/img/menu.png",alt:""}))),o&&r.a.createElement(Le,{onClose:this.onToggleAddMember,onAddMember:this.onAddMember}),i&&r.a.createElement(Ve,{history:c,onSetBg:n,board:a,onClose:this.onToggleBoardMenu}))}}]),a}(n.Component),Xe={save:ee,loadBoard:$},Je=Object(E.b)((function(e){return{currBoard:e.board.currBoard,loggedInUser:e.user.loggedInUser}}),Xe)(Ye),Ke=a(259),Qe=a(272),Ze=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).state={data:[{id:"",label:"",value:0,color:"#fff"}]},e.statsTimeOut=null,e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.statsTimeOut=setTimeout((function(){e.setState({data:e.props.data})}),250)}},{key:"componentDidUpdate",value:function(e){this.props.data!==e.data&&this.setState({data:this.props.data})}},{key:"componentWillUnmount",value:function(){this.statsTimeOut&&clearTimeout(this.statsTimeOut)}},{key:"render",value:function(){var e=this.state.data;return r.a.createElement(Qe.a,{data:e,className:"pie-content",margin:{top:10,right:80,bottom:80,left:80},innerRadius:.75*Math.random(),padAngle:Math.floor(9*Math.random())+1,cornerRadius:5,colors:function(e){return e.color},borderWidth:2,borderColor:{from:"color",modifiers:[["darker",.2]]},radialLabelsSkipAngle:10,radialLabelsTextXOffset:6,radialLabelsTextColor:"#333333",radialLabelsLinkOffset:0,radialLabelsLinkDiagonalLength:16,radialLabelsLinkHorizontalLength:24,radialLabelsLinkStrokeWidth:1,radialLabelsLinkColor:{from:"color"},slicesLabelsSkipAngle:10,slicesLabelsTextColor:"#333333",animate:!0,motionStiffness:90,motionDamping:15,defs:[{id:"error",type:"patternError",background:"#f2d600",color:"rgba(255, 255, 255, 0.3)",rotation:-45,lineWidth:6,spacing:10},{id:"lines",type:"patternLines",background:"inherit",color:"rgba(255, 255, 255, 0.3)",rotation:-45,lineWidth:6,spacing:10}],fill:[{match:{id:"error"},id:"error"},{match:{id:"c"},id:"dots"},{match:{id:"go"},id:"dots"},{match:{id:"python"},id:"dots"},{match:{id:"scala"},id:"lines"},{match:{id:"lisp"},id:"lines"},{match:{id:"elixir"},id:"lines"},{match:{id:"javascript"},id:"lines"}],legends:[]})}}]),a}(r.a.Component),$e=a(267),et=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).state={data:[{member:"",Tasks:0,"Done Tasks":0}]},e.statsTimeOut=null,e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.statsTimeOut=setTimeout((function(){e.setState({data:e.props.data})}),250)}},{key:"componentDidUpdate",value:function(e){this.props.data!==e.data&&this.setState({data:this.props.data})}},{key:"componentWillUnmount",value:function(){this.statsTimeOut&&clearTimeout(this.statsTimeOut)}},{key:"render",value:function(){var e={Tasks:_(),"Done Tasks":"#3f3f3f"},t=function(t){return e[t.id]},a=this.state.data;return r.a.createElement($e.a,{data:a,keys:["Tasks","Done Tasks"],indexBy:"member",margin:{top:10,right:130,bottom:50,left:60},padding:.3,colors:t,defs:[{id:"admin",type:"patternDots",background:"inherit",color:"#38bcb2",size:4,padding:1,stagger:!0},{id:"lines",type:"patternLines",background:"inherit",color:"#eed312",rotation:-45,lineWidth:6,spacing:10}],fill:[{match:{id:"admin"},id:"dots"},{match:{id:"sandwich"},id:"lines"}],borderColor:{from:"color",modifiers:[["darker",1.6]]},axisTop:null,axisRight:null,axisBottom:{tickSize:5,tickPadding:5,tickRotation:0,legend:"Users",legendPosition:"middle",legendOffset:32},axisLeft:{tickSize:5,tickPadding:5,tickRotation:0,legend:"Tasks",legendPosition:"middle",legendOffset:-35},labelSkipWidth:12,labelSkipHeight:12,labelTextColor:{from:{getUserColor:t},modifiers:[["darker",1.6]]},legends:[{dataFrom:"keys",anchor:"bottom-right",direction:"column",justify:!1,translateX:120,translateY:0,itemsSpacing:2,itemWidth:100,itemHeight:20,itemDirection:"left-to-right",itemOpacity:.85,symbolSize:20,effects:[{on:"hover",style:{itemOpacity:1}}]}],animate:!0,motionStiffness:90,motionDamping:15})}}]),a}(r.a.Component),tt=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).state={board:{},currView:"byUsers",cardCount:-1},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState((function(e){return{card:Object(h.a)(Object(h.a)({},e.card),{},Object(g.a)({},n,r))}}))},e.onBackBoard=function(t){var a=e.props.match.params.boardId;e.props.history.push("/boards/".concat(a))},e.getStatsByLabels=function(e){var t={};return e.stacks.forEach((function(e){e.cards.forEach((function(e){e.labels.forEach((function(e){t[e.title]?t[e.title].count+=1:t[e.title]={count:1,color:e.color}}))}))})),Object.keys(t).map((function(e){var a=t[e];return{id:e,label:e,value:a.count,color:a.color}}))},e.getStatsByUsers=function(e){var t={};return e.stacks.forEach((function(e){e.cards.forEach((function(e){if(e.byMember){t[e.byMember.username]||(t[e.byMember.username]={tasks:0,doneTasks:0});var a=e.labels.some((function(e){return"done"===e.title}));t[e.byMember.username][a?"doneTasks":"tasks"]+=1}}))})),Object.keys(t).map((function(e){var a=t[e];return{member:e,Tasks:a.tasks-a.doneTasks,"Done Tasks":a.doneTasks}}))},e.getStatsByDueDates=function(t){var a={"On Schedule":0,Delayed:0},n=0;return t.stacks.forEach((function(e){n+=e.cards.length,e.cards.forEach((function(e){""!=e.dueDate&&(+ge()(e.dueDate).format("x")>Date.now()?a["On Schedule"]+=1:a.Delayed+=1)}))})),n?(e.state.cardCount!==n&&e.setState({cardCount:n}),Object.keys(a).map((function(e){return{id:e,label:e,value:a[e],color:"Delayed"===e?"tomato":"lightgreen"}}))):null},e.getBoardStats=function(t){if(!t.stacks)return null;var a=e.getStatsByLabels(t),n=e.getStatsByUsers(t),r=e.getStatsByDueDates(t);return null===r?e.setState({isNoCardsBoard:!0}):e.state.isNoCardsBoard&&e.setState({isNoCardsBoard:!1}),{byLabels:a,byUsers:n,byDueDate:r}},e.toggleStatView=function(t){e.state.currView!==t&&e.setState({currView:t})},e.elStats=r.a.createRef(),e.statsTimeOut=null,e.boardStats=null,e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.currBoard&&(this.statsTimeOut=setTimeout((function(){e.setState({board:e.props.currBoard})}),250))}},{key:"componentDidUpdate",value:function(e){this.props.currBoard!==e.currBoard&&this.setState({board:this.props.currBoard})}},{key:"componentWillUnmount",value:function(){this.statsTimeOut&&clearTimeout(this.statsTimeOut)}},{key:"render",value:function(){var e=this,t=this.state,a=t.board,n=t.currView,c=t.cardCount;Object(Ke.a)(this);var s=null;return a&&(s=this.getBoardStats(a)),a?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"screen stats",onMouseDown:this.onBackBoard},r.a.createElement("section",{className:"board-statistics modal-container flex column",onMouseDown:function(e){return e.stopPropagation()},ref:this.elStats},r.a.createElement("header",{className:"board-statistics-header-span flex align-center justify-center"},r.a.createElement("p",{className:"board-statistics-header"},"' ",a.title," '")),r.a.createElement("small",{className:"board-statistics-info flex align-center space-evenly"},a.createdBy?r.a.createElement("span",{className:"stat-created-at-span flex align-center"},r.a.createElement("p",{className:"secondary"},"created:"),r.a.createElement("p",{className:"statistics-info-p"},"".concat(ge()(a.createdAt).format("MMM Do YYYY")," [").concat(a.createdBy.username,"]"))):null,a.members?r.a.createElement("span",{className:"stat-members-count flex align-center"},r.a.createElement("p",{className:"secondary"},"members:"),r.a.createElement("p",{className:"statistics-info-p"},a.members.length)):null,a.stacks?r.a.createElement("span",{className:"stat-stacks-count flex align-center"},r.a.createElement("p",{className:"secondary"},"lists:"),r.a.createElement("p",{className:"statistics-info-p"},a.stacks.length)):null,a.stacks&&c?r.a.createElement("span",{className:"stat-stacks-count flex align-center"},r.a.createElement("p",{className:"secondary"},"tasks:"),r.a.createElement("p",{className:"statistics-info-p"},c)):null,a.activities?r.a.createElement("span",{className:"stat-activities-count flex align-center"},r.a.createElement("p",{className:"secondary"},"activities:"),r.a.createElement("p",{className:"statistics-info-p"},a.activities.length)):null),s?r.a.createElement("section",{className:"board-statistics-content flex"},r.a.createElement("aside",{className:"statistics-controllers flex column align-center space-around"},r.a.createElement("button",{className:"btn btn-primary stat-button ".concat("byLabels"===n?"active-stat-btn":""),onClick:function(){return e.toggleStatView("byLabels")}},"By Labels"),r.a.createElement("button",{className:"btn btn-primary stat-button ".concat("byUsers"===n?"active-stat-btn":""),onClick:function(){return e.toggleStatView("byUsers")}},"By Members"),r.a.createElement("button",{className:"btn btn-primary stat-button ".concat("byDueDate"===n?"active-stat-btn":""),onClick:function(){return e.toggleStatView("byDueDate")}},"By Schedule")),r.a.createElement("div",{className:"statistics-charts"},s.byLabels&&"byLabels"===n?r.a.createElement("div",{className:"stat-item flex column justify-center align-center"},r.a.createElement("p",{className:"board-stats-title"},"Most Popular Labels"),r.a.createElement(Ze,{data:s.byLabels,type:"labels"})):null,s.byUsers&&"byUsers"===n?r.a.createElement("div",{className:"stat-item flex column justify-center align-center"},r.a.createElement("p",{className:"board-stats-title"},"Weekly Members Workload"),r.a.createElement(et,{data:s.byUsers})):null,s.byDueDate&&"byDueDate"===n?r.a.createElement("div",{className:"stat-item flex column justify-center align-center"},r.a.createElement("p",{className:"board-stats-title"},"On-Time/Delayed Work"),r.a.createElement(Ze,{data:s.byDueDate,type:"dueDate"})):null)):null))):""}}]),a}(r.a.Component),at={save:ee,loadBoard:$},nt=Object(E.b)((function(e){return{currBoard:e.board.currBoard,loggedInUser:e.user.loggedInUser}}),at)(tt),rt=a(42);function ct(e,t,a){var n=Array.from(e),r=n.splice(t,1),c=Object(rt.a)(r,1)[0];return n.splice(a,0,c),n}a(517);var st=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(o.a)(this,a),(e=t.call(this)).state={areLabelsOpen:!1},e.setBoard=function(t){return e.props.setBoard(t)},e.onToggleLabels=function(){e.setState((function(e){return{areLabelsOpen:!e.areLabelsOpen}}))},e.onEditTitle=function(t){var a=t.target,n=Object(h.a)({},e.props.currBoard);n.stacks[a.dataset.idx].title=a.value,e.props.save(n)},e.getItemStyle=function(e,t){return Object(h.a)(Object(h.a)({},t),{},{background:e?"rgb(219, 219, 219)":"#ebecf0"})},e.onStackAdd=function(t){var a=Object(h.a)({},e.props.currBoard);a.stacks.push({bgColor:"#fefefe",cards:[],id:L(),title:t}),e.props.save(a)},e.onCardAdd=function(t,a){var n=Object(h.a)({},e.props.currBoard),r=n.stacks.findIndex((function(e){return a===e.id}));n.stacks[r].cards.push({id:L(),title:t,description:"",comments:[],checklists:[],members:[],labels:[],activities:[],byMember:e.props.loggedInUser,createdAt:Date.now(),dueDate:""}),e.props.save(e.props.currBoard)},e.onDragEnd=function(t){var a=e.props,n=a.loggedInUser,r=a.currBoard,c=t.source,s=t.destination;if(s){var o=Object(le.a)(r.stacks),i=Object(h.a)({},r);if(c.droppableId===s.droppableId&&"board"===c.droppableId){var l=ct(o,c.index,s.index);i.stacks=l;var u=r.stacks[c.index].title,d=s.index+1;r.activities.unshift({id:L(),txt:"moved stack ".concat(u," to place number ").concat(d),createdAt:Date.now(),byMember:n})}else{var m=+c.droppableId,p=+s.droppableId;if(m===p){var g=ct(o[m].cards,c.index,s.index);i.stacks[m].cards=g}else{var b=r.stacks[+c.droppableId].title,f=r.stacks[+s.droppableId].title,v=r.stacks[+c.droppableId].cards[c.index].title;r.activities.unshift({id:L(),txt:"moved card ".concat(v," from ").concat(b," to ").concat(f),createdAt:Date.now(),byMember:n});var E=function(e,t,a,n){var r=Array.from(e),c=Array.from(t),s=r.splice(a.index,1),o=Object(rt.a)(s,1)[0];c.splice(n.index,0,o);var i={};return i[a.droppableId]=r,i[n.droppableId]=c,i}(o[m].cards,o[p].cards,c,s);i.stacks[m].cards=E[m],i.stacks[p].cards=E[p]}}e.props.save(i)}},e.onStackTitleFocus=function(t){e.stackTitleFocus[t].focus()},e.stacks=function(t){var a=e.props.currBoard;return r.a.createElement("span",{className:"stacks-section flex"},r.a.createElement(ue.a,{onDragEnd:e.onDragEnd},r.a.createElement(ue.c,{droppableId:"board",isCombineEnabled:!1,type:"STACK",direction:"horizontal"},(function(n,c){return r.a.createElement("div",Object.assign({ref:n.innerRef},n.droppableProps,{className:"stacks-content flex"}),a.stacks.length?a.stacks.map((function(n,c){return r.a.createElement(ue.b,{key:n.id,draggableId:n.id,disableInteractiveElementBlocking:!0,index:c,type:"STACK"},(function(s,o){return r.a.createElement("div",Object.assign({ref:s.innerRef},s.draggableProps,{style:Object(h.a)(Object(h.a)({},e.getItemStyle(o.isDragging,s.draggableProps.style)),{},{width:250}),className:"stack-content flex column"}),r.a.createElement("div",Object.assign({className:"stack-header flex space-between"},s.dragHandleProps),r.a.createElement("input",{type:"text",name:"title",className:"stack-title-input","data-idx":c,onChange:e.onEditTitle,value:n.title,onClick:function(){return e.onStackTitleFocus(c)},ref:function(t){return e.stackTitleFocus[c]=t}}),r.a.createElement("button",{className:"stack-header-menu"},". . .")),r.a.createElement(ue.c,{key:c,droppableId:"".concat(c),isCombineEnabled:!1,type:"CARD"},(function(c,s){return r.a.createElement(fe,{innerRef:c.innerRef,provided:c},n.cards.map((function(n,c){return r.a.createElement(ue.b,{key:n.id,draggableId:n.id,index:c,type:"CARD"},(function(c,s){return r.a.createElement("span",null,r.a.createElement(be,{title:n.title,innerRef:c.innerRef,provided:c,card:n,labelsOpen:t,onToggleLabels:e.onToggleLabels,link:"/boards/".concat(a._id,"/card/").concat(n.id),style:e.getItemStyle(s.isDragging,c.draggableProps.style),history:e.props.history}))}))})),c.placeholder)})),r.a.createElement(me,{type:"card",onCardAdd:e.onCardAdd,itemId:n.id}))}))})):null,n.placeholder)})),r.a.createElement("div",{className:"add-stack-container"},r.a.createElement(me,{type:"stack",onStackAdd:e.onStackAdd}))))},e.onSetBg=function(t,a){if("img"===a){var n=t.slice(1,t.length+1);document.body.style.backgroundImage="url(/".concat(n,")"),document.body.style.backgroundPosition="center",document.body.style.backgroundColor="",e.props.currBoard.bg=n}else document.body.style.backgroundImage="",document.body.style.backgroundColor=t,e.props.currBoard.bg=t;var r=e.props.loggedInUser;e.props.currBoard.activities.unshift({id:L(),txt:"has changed the board background",createdAt:Date.now(),byMember:r}),e.props.save(e.props.currBoard)},e.stackTitleFocus=[],e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){if(!this.props.loggedInUser)return this.props.history.push("/boards");var e=this.props.match.params.boardId;Z.setup(),Z.emit("setBoard",e),Z.on("loadBoard",this.setBoard),document.body.style.backgroundSize="cover",this.props.loadBoard(e)}},{key:"componentDidUpdate",value:function(e){e.currBoard!==this.props.currBoard&&(document.body.style.backgroundImage="url(/".concat(this.props.currBoard.bg,")"),document.body.style.backgroundColor=this.props.currBoard.bg)}},{key:"componentWillUnmount",value:function(){this.props.loggedInUser&&(document.body.style="",Z.off("loadBoard",this.setBoard),Z.terminate())}},{key:"render",value:function(){var e=this.props.history,t=this.props.currBoard,a=this.state.areLabelsOpen;return t?r.a.createElement(r.a.Fragment,null,r.a.createElement(Je,{history:e,board:t,onSetBg:this.onSetBg}),r.a.createElement(d.a,{component:Me,path:"/boards/:boardId/card/:cardId"}),r.a.createElement(d.a,{component:nt,path:"/boards/:boardId/statistics"}),r.a.createElement("section",{className:"board-content flex column align-start space-between"},t?this.stacks(a):null)):"Loading..."}}]),a}(r.a.Component),ot={loadBoard:$,save:ee,setBoard:function(e){return function(t){return t({type:"SET_BOARD",board:e})}}},it=Object(E.b)((function(e){return{currBoard:e.board.currBoard,loggedInUser:e.user.loggedInUser}}),ot)(st),lt=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={user:null,msg:"",isUploadImg:!1,isFinishUpload:!1,isErrorMsg:!1},e.onUploadImg=function(){var t=Object(v.a)(f.a.mark((function t(a){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({isUploadImg:!0}),t.next=3,P(a);case 3:n=t.sent,e.setState({isUploadImg:!1,isFinishUpload:!0}),e.timeoutFinishUpload=setTimeout((function(){e.setState({isFinishUpload:!1})}),2500),e.setState((function(e){return{user:Object(h.a)(Object(h.a)({},e.user),{},{imgUrl:n})}}));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState((function(e){return{user:Object(h.a)(Object(h.a)({},e.user),{},Object(g.a)({},n,r))}}))},e.onUpdateUser=function(){var t=Object(v.a)(f.a.mark((function t(a){var n,r,c,s,o,i,l;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),n=e.state.user,r=n.username,c=n.password,s=n.fullname,o=n.imgUrl,i=n.confirmPassword,r&&c&&s){t.next=4;break}return t.abrupt("return",e.setState({msg:"Please enter username, password and full name",isErrorMsg:!0}));case 4:if(c||i){t.next=6;break}return t.abrupt("return",e.setState({msg:"Please enter username and password",isErrorMsg:!0}));case 6:if(c===i){t.next=8;break}return t.abrupt("return",e.setState({msg:"Passwords don't match!",isErrorMsg:!0}));case 8:return l={_id:e.props.loggedInUser._id,username:r,password:c,fullname:s,imgUrl:o},t.prev=9,t.next=12,e.props.update(l);case 12:return l._id=e.props.loggedInUser._id,t.next=15,e.props.login(l);case 15:t.next=20;break;case 17:return t.prev=17,t.t0=t.catch(9),t.abrupt("return",e.setState({isErrorMsg:!0,msg:t.t0}));case 20:return t.abrupt("return",e.setState({isErrorMsg:!1,msg:"User Updated Successfully"},(function(){setTimeout((function(){e.props.history.go(0),e.setState({msg:""})}),2e3)})));case 21:case"end":return t.stop()}}),t,null,[[9,17]])})));return function(e){return t.apply(this,arguments)}}(),e.onOpenUpload=function(){e.inputElement.click()},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.loggedInUser,a=e.history;t||a.push("/login"),this.setState({user:t})}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeoutFinishUpload)}},{key:"render",value:function(){var e=this,t=this.state,a=t.user,n=t.msg,c=t.isErrorMsg,s=t.isUploadImg,o=c?{backgroundColor:"#dd1739"}:{backgroundColor:"#17d965"};return a?r.a.createElement("div",{className:"container flex justify-center"},r.a.createElement("div",{className:"form-container"},r.a.createElement("div",{className:"user-profile-container flex align-start"},r.a.createElement("div",{className:"user-content"},r.a.createElement("h2",{className:"user-profile-title flex align-center"},r.a.createElement("img",{src:"assets/img/user-icon.png",className:"user-icon",alt:""})," ",this.props.loggedInUser.fullname),r.a.createElement("form",{onSubmit:this.onUpdateUser,className:"user-profile-form flex column align-start"},r.a.createElement("input",{type:"text",placeholder:"User name",autoComplete:"off",onChange:this.handleChange,className:"profile-input input",name:"username",value:a.username}),r.a.createElement("input",{type:"text",placeholder:"Full name",autoComplete:"off",onChange:this.handleChange,className:"profile-input input",name:"fullname",value:a.fullname}),r.a.createElement("input",{type:"password",placeholder:"Password",autoComplete:"off",onChange:this.handleChange,className:"profile-input input",name:"password"}),r.a.createElement("input",{type:"password",placeholder:"Confirm Password",autoComplete:"off",onChange:this.handleChange,className:"profile-input input",name:"confirmPassword"}),r.a.createElement("input",{type:"file",name:"imgUrl",ref:function(t){return e.inputElement=t},onChange:this.onUploadImg,hidden:!0}),r.a.createElement("div",{className:"img-submit-container flex space-between align-start"},r.a.createElement("span",{className:"upload-img",onClick:function(){return e.onOpenUpload()}},"Upload Profile Image"),r.a.createElement("button",{className:"btn btn-success ".concat(s?"disable":""),disabled:s},"Save Changes"))),n&&r.a.createElement("div",{style:o,className:"user-msg flex align-center space-between"},n,r.a.createElement("img",{src:"assets/img/error-white.png",className:"small-icon",alt:""}))),r.a.createElement("div",{className:"user-img"},r.a.createElement("img",{src:a.imgUrl,alt:""}))))):"Loading..."}}]),a}(n.Component),ut={update:function(e){return function(){var t=Object(v.a)(f.a.mark((function t(a){var n;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D.update(e);case 2:n=t.sent,a({type:"UPDATE_USER",updatedUser:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},login:M},dt=Object(E.b)((function(e){return{loggedInUser:e.user.loggedInUser}}),ut)(lt),mt=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={isScroll:!1,isMenuOpen:!1},e.handleScroll=function(){var t,a=document.body;0===(t=(t=document.documentElement).clientHeight?t:a).scrollTop?e.setState({isScroll:!1}):e.setState({isScroll:!0})},e.onLogout=Object(v.a)(f.a.mark((function t(){var a;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.logout();case 2:e.toggleMenu(),a={username:"Guest-".concat(L(4)),password:"123456",fullname:"Guesty McGuest-".concat(L(4)),imgUrl:"https://res.cloudinary.com/shaishar9/image/upload/v1590398852/tgfntq8ghkaxjpo9seqa.jpg",isGuest:!0,bgColor:_()},e.props.signup(a);case 5:case"end":return t.stop()}}),t)}))),e.toggleMenu=function(){e.setState((function(e){return{isMenuOpen:!e.isMenuOpen}}))},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.scrollEvent()}},{key:"componentWillUnmount",value:function(){window.document.removeEventListener("scroll",this.handleScroll)}},{key:"scrollEvent",value:function(){window.document.addEventListener("scroll",this.handleScroll)}},{key:"render",value:function(){var e=this,t=this.props.loggedInUser,a=this.state,n=a.isMenuOpen,c=a.isScroll;return r.a.createElement(r.a.Fragment,null,n&&r.a.createElement("div",{className:"screen main-nav-screen",onClick:this.toggleMenu}),r.a.createElement("div",{className:"nav-container ".concat(c||!this.isHomepage?"scrolled":""," ").concat(n?"menu-open":""),style:this.isHomepage?{marginTop:"10px"}:{}},r.a.createElement("div",{className:"".concat(this.isHomepage?"container":"")},r.a.createElement("div",{className:"nav-content flex space-between align-center"},r.a.createElement(m.a,{to:"/"},r.a.createElement("h1",{className:"logo"},r.a.createElement("span",{className:"logo-we"},"we"),"task")),r.a.createElement("ul",{className:"main-nav clean-list flex"},r.a.createElement("li",{className:"quit-menu"},r.a.createElement("button",{onClick:function(){return e.toggleMenu()}})),r.a.createElement("li",null,r.a.createElement(m.b,{onClick:this.toggleMenu,exact:!0,to:"/"},"Home")),t&&r.a.createElement("li",null,r.a.createElement(m.b,{onClick:this.toggleMenu,to:"/boards"},"Boards")),t&&r.a.createElement("li",null,r.a.createElement(m.b,{onClick:this.toggleMenu,to:"/profile"},"Profile")),(null===t||void 0===t?void 0:t.isGuest)&&r.a.createElement("li",null,r.a.createElement(m.b,{onClick:this.toggleMenu,to:"/signup"},"Signup")),(null===t||void 0===t?void 0:t.isGuest)&&r.a.createElement("li",null,r.a.createElement(m.b,{onClick:this.toggleMenu,to:"/login"},"Login")),!(null===t||void 0===t?void 0:t.isGuest)&&r.a.createElement("li",null,r.a.createElement(m.a,{to:"/",onClick:this.onLogout},"Logout"))),r.a.createElement("button",{onClick:function(){return e.toggleMenu()},className:"btn-menu"})))))}},{key:"isHomepage",get:function(){return"/"===this.props.location.pathname}}]),a}(n.Component),pt={logout:function(){return function(){var e=Object(v.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.logout();case 2:t(R(null));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},signup:I},gt=Object(E.b)((function(e){return{loggedInUser:e.user.loggedInUser}}),pt)(mt),bt=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.props.loggedInUser||this.guestSignup()}},{key:"guestSignup",value:function(){var e={username:"Guest-".concat(L(4)),password:"123456",fullname:"Guesty McGuest-".concat(L(4)),imgUrl:"https://res.cloudinary.com/shaishar9/image/upload/v1590398852/tgfntq8ghkaxjpo9seqa.jpg",isGuest:!0,bgColor:_()};this.props.signup(e)}},{key:"render",value:function(){return r.a.createElement("div",{className:"app"},r.a.createElement(d.a,{component:gt,path:"/"}),r.a.createElement("main",{className:"main-content top-p"},r.a.createElement(d.c,null,r.a.createElement(d.a,{component:dt,path:"/user/:userId"}),r.a.createElement(d.a,{component:it,path:"/boards/:boardId"}),r.a.createElement(d.a,{component:ie,path:"/boards"}),r.a.createElement(d.a,{component:dt,path:"/profile"}),r.a.createElement(d.a,{component:q,path:"/login"}),r.a.createElement(d.a,{component:q,path:"/signup"}),r.a.createElement(d.a,{component:p,path:"/"}))))}}]),a}(n.Component),ft={signup:I},ht=Object(E.b)((function(e){return{loggedInUser:e.user.loggedInUser}}),ft)(bt);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var vt=a(38),Et=a(270),kt=null;sessionStorage.user&&(kt=JSON.parse(sessionStorage.user));var yt={loggedInUser:kt,users:[]},Ct={boards:[],currBoard:null};var wt=Object(vt.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yt,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SET_USER":return Object(h.a)(Object(h.a)({},e),{},{loggedInUser:t.user});case"LOAD_USERS":return Object(h.a)(Object(h.a)({},e),{},{users:t.users});case"UPDATE_USER":return Object(h.a)(Object(h.a)({},e),{},{users:e.users.map((function(e){return e._id===t.user._id?t.user:e}))});default:return e}},board:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ct,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_BOARDS":return Object(h.a)(Object(h.a)({},e),{},{boards:t.boards});case"SET_BOARD":return Object(h.a)(Object(h.a)({},e),{},{currBoard:t.board});case"SET_CARD":return Object(h.a)(Object(h.a)({},e),{},{currBoard:Object(h.a)(Object(h.a)({},e.currBoard),{},{stacks:e.currBoard.stacks.map((function(e){return e.cards=e.cards.map((function(e){return e.id===t.card.id?t.card:e})),e}))})});case"ADD_BOARD":return Object(h.a)(Object(h.a)({},e),{},{boards:[].concat(Object(le.a)(e.boards),[t.board])});case"UPDATE_BOARD":return Object(h.a)(Object(h.a)({},e),{},{boards:e.boards.map((function(e){return e._id===t.board._id?t.board:e}))});case"REMOVE_BOARD":return Object(h.a)(Object(h.a)({},e),{},{boards:e.boards.filter((function(e){return e._id!==t.boardId}))});default:return e}}}),Ot=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||vt.d,Nt=Object(vt.e)(wt,Ot(Object(vt.a)(Et.a))),St=a(35),jt=Object(St.a)();s.a.render(r.a.createElement(E.a,{store:Nt},r.a.createElement(d.b,{history:jt},r.a.createElement(ht,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[306,1,2]]]);
//# sourceMappingURL=main.4c8dce0e.chunk.js.map