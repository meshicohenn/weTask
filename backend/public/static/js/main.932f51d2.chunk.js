(this.webpackJsonptaski=this.webpackJsonptaski||[]).push([[0],{305:function(e,t,a){e.exports=a(516)},310:function(e,t,a){},362:function(e,t){},516:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(73),s=a.n(o),c=a(8),i=a(9),l=a(11),u=a(10),m=a(24),d=(a(310),a(15));function p(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:"home-container hero-container flex align-center"},r.a.createElement("div",{className:"hero-cta flex space-between align-center"},r.a.createElement("div",{className:"hero-content"},r.a.createElement("div",{className:"hero-txt"},"Work made easy"),r.a.createElement("p",null,"Using cutting edge technologies and a great understanding of positive work principles, wework balances the best of both worlds for your team's success!"),r.a.createElement(d.a,{to:"/boards/5ecf72e3145b296860281f54",className:"hero-btn"},"Try now")),r.a.createElement("img",{src:"assets/img/hero-img.svg",alt:"",className:"hero-img"}))),r.a.createElement("section",{className:"home-container second-container flex align-center"},r.a.createElement("img",{src:"assets/img/home-second-img.svg",alt:"",className:"hero-img"}),r.a.createElement("div",{className:"content "},r.a.createElement("div",{className:"txt-title"},"A work community like never before"),r.a.createElement("p",null,"Getting a lot of great information upfront is great - but its what information you get that counts. With features like our 'Time Estimation' system for better development financial tracking, you can feel safe your seeing it all - and with 20/20 vision."))))}var g=a(21),f=a(14),h=a.n(f),b=a(2),v=a(18),E=a(16),k=a(116),y=a.n(k),C=y.a.create({withCredentials:!0}),S=function(e,t){return j(e,"GET",t)},w=function(e,t){return j(e,"POST",t)},O=function(e,t){return j(e,"PUT",t)},N=function(e,t){return j(e,"DELETE",t)};function j(e){return x.apply(this,arguments)}function x(){return(x=Object(v.a)(h.a.mark((function e(t){var a,n,r,o=arguments;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=o.length>1&&void 0!==o[1]?o[1]:"get",n=o.length>2&&void 0!==o[2]?o[2]:null,e.prev=2,e.next=5,C({url:"".concat("/api/").concat(t),method:a,data:n});case 5:return r=e.sent,e.abrupt("return",r.data);case 9:throw e.prev=9,e.t0=e.catch(2),console.log("Had Issues ".concat(a,"ing to the backend, endpoint: ").concat(t,", with data: ").concat(n)),console.dir(e.t0),e.t0.response.data.error;case 14:case"end":return e.stop()}}),e,null,[[2,9]])})))).apply(this,arguments)}var T={login:function(e){return B.apply(this,arguments)},logout:function(){return A.apply(this,arguments)},signup:function(e){return D.apply(this,arguments)},getById:function(e){return S("user/".concat(e))},query:function(e){return S(e?"users?q=".concat(e.q,"&boardId=").concat(e.board._id):"users")},update:function(e){return O("users/".concat(e._id),e)}};function B(){return(B=Object(v.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w("auth/login",t);case 3:return a=e.sent,e.abrupt("return",U(a));case 7:throw e.prev=7,e.t0=e.catch(0),e.t0;case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}function D(){return(D=Object(v.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w("auth/signup",t);case 2:return a=e.sent,e.abrupt("return",U(a));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){return(A=Object(v.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w("auth/logout");case 2:sessionStorage.clear();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e){return sessionStorage.setItem("user",JSON.stringify(e)),e}function I(e){try{return function(){var t=Object(v.a)(h.a.mark((function t(a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T.login(e);case 2:n=t.sent,a(R(n));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}catch(t){throw t}}function M(e){return function(){var t=Object(v.a)(h.a.mark((function t(a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T.signup(e);case 2:n=t.sent,a(R(n));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}function R(e){return{type:"SET_USER",user:e}}function L(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,t="",a="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ",n=0;n<e;n++)t+=a.charAt(Math.floor(Math.random()*a.length));return t}function F(){for(var e="0123456789ABCDEF".split(""),t="#",a=0;a<6;a++)t+=e[Math.floor(16*Math.random())];return t}function P(e){var t="https://api.cloudinary.com/v1_1/".concat("shaishar9","/image/upload"),a=new FormData;return a.append("file",e.target.files[0]),a.append("upload_preset","cgwfirgu"),y.a.post(t,a).then((function(e){return e.data.url})).catch((function(e){return console.error(e)}))}var _=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={user:{username:"",password:"",fullname:"",imgUrl:"",confirmPassword:""},isLogin:!1,msg:"",isUploadImg:!1,isFinishUpload:!1},e.setCurrPage=function(){var t="/login"===e.props.match.path;e.setState({isLogin:t})},e.onUploadImg=function(){var t=Object(v.a)(h.a.mark((function t(a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({isUploadImg:!0}),t.next=3,P(a);case 3:n=t.sent,e.setState({isUploadImg:!1,isFinishUpload:!0}),e.timeoutFinishUpload=setTimeout((function(){e.setState({isFinishUpload:!1})}),2500),e.setState((function(e){return{user:Object(b.a)(Object(b.a)({},e.user),{},{imgUrl:n})}}));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState((function(e){return{user:Object(b.a)(Object(b.a)({},e.user),{},Object(g.a)({},n,r))}}))},e.handleUserSubmit=function(){var t=Object(v.a)(h.a.mark((function t(a){var n,r,o,s,c,i,l,u;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),n=e.state.user,r=n.username,o=n.password,s=n.fullname,c=n.imgUrl,i=n.confirmPassword,l=e.state.isLogin,r&&(o||i||!l)){t.next=5;break}return t.abrupt("return",e.setState({msg:"Please enter username and password"}));case 5:if(l||o===i){t.next=7;break}return t.abrupt("return",e.setState({msg:"Passwords don't match!"}));case 7:if(l||r||o||s){t.next=9;break}return t.abrupt("return",e.setState({msg:"Please enter username, password and full name"}));case 9:if(u={username:r,password:o,fullname:s,imgUrl:c},t.prev=10,!e.state.isLogin){t.next=16;break}return t.next=14,e.props.login(u);case 14:t.next=19;break;case 16:return u.bgColor=F(),t.next=19,e.props.signup(u);case 19:t.next=24;break;case 21:return t.prev=21,t.t0=t.catch(10),t.abrupt("return",e.setState({msg:t.t0}));case 24:e.props.history.push("/boards");case 25:case"end":return t.stop()}}),t,null,[[10,21]])})));return function(e){return t.apply(this,arguments)}}(),e.onOpenUpload=function(){e.inputElement.click()},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.setCurrPage()}},{key:"componentDidUpdate",value:function(e){e.match.params!==this.props.match.params&&(this.setState({msg:"",isUploadImg:!1,isFinishUpload:!1,user:{username:"",password:"",confirmPassword:"",fullname:"",imgUrl:""}}),this.setCurrPage())}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeoutFinishUpload)}},{key:"render",value:function(){var e=this,t=this.state,a=t.isLogin,n=t.msg,o=t.user,s=t.isUploadImg,c=t.isFinishUpload;return r.a.createElement("div",{className:"container flex column align-center"},r.a.createElement("div",{className:"form-container"},r.a.createElement("h2",{className:"form-title"},a?"Login":"Signup"),a&&r.a.createElement("div",{className:"signup-login-link"},r.a.createElement(d.a,{to:"/signup"},"Sign up for an account")),!a&&r.a.createElement("div",{className:"signup-login-link"},r.a.createElement(d.a,{to:"/login"},"Already have an account? Sign in")),c&&r.a.createElement("div",{className:"img-uploaded-msg flex align-center space-between"},"Your image was uploaded successfully! ",r.a.createElement("img",{src:"assets/img/success.png",className:"small-icon",alt:""})),r.a.createElement("div",{className:"form-img-container flex"},r.a.createElement("form",{className:"login-signup-form flex column align-start",onSubmit:this.handleUserSubmit},r.a.createElement("input",{type:"text",onChange:this.handleChange,value:o.username,name:"username",autoComplete:"off",placeholder:"Username"}),!a&&r.a.createElement("input",{type:"text",onChange:this.handleChange,value:o.fullname,name:"fullname",autoComplete:"off",placeholder:"Full name"}),r.a.createElement("input",{type:"password",onChange:this.handleChange,value:o.password,name:"password",placeholder:"Password"}),!a&&r.a.createElement("input",{type:"password",onChange:this.handleChange,value:o.confirmPassword,name:"confirmPassword",placeholder:"Confirm password"}),!a&&r.a.createElement("input",{type:"file",ref:function(t){return e.inputElement=t},name:"imgUrl",onChange:this.onUploadImg,hidden:!0}),r.a.createElement("div",{className:"img-submit-container flex align-start space-between"},!a&&r.a.createElement("span",{className:"upload-img",onClick:function(){return e.onOpenUpload()}},"Upload Profile Image"),r.a.createElement("button",{className:"btn btn-success ".concat(s?"disable":""),disabled:s},a?"Login":"Signup"))),r.a.createElement("img",{src:"assets/img/login-signup.png",className:"login-signup-img",alt:""})),n&&r.a.createElement("div",{className:"user-msg flex align-center space-between"},n,r.a.createElement("img",{src:"assets/img/error-white.png",className:"small-icon",alt:""}))))}}]),a}(n.Component),H={signup:M,login:I},W=Object(E.b)((function(e){return{loggedInUser:e.user.loggedInUser}}),H)(_);function q(e){var t=e.board;return r.a.createElement(d.a,{to:"/boards/".concat(t._id),className:"board-item",style:{backgroundColor:t.bg,backgroundImage:"url(".concat(t.bg,")")}},r.a.createElement("h3",null,t.title))}var z={query:function(e){return G.apply(this,arguments)},save:function(e){return K.apply(this,arguments)},remove:function(e){return Y.apply(this,arguments)},get:function(e){return J.apply(this,arguments)}};function G(){return(G=Object(v.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a="?userId=".concat(t),e.next=3,S("".concat("boards").concat(a));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(){return(J=Object(v.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S("".concat("boards","/").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Y(){return(Y=Object(v.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N("".concat("boards","/").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function K(){return(K=Object(v.a)(h.a.mark((function e(t){var a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t._id){e.next=6;break}return e.next=3,O("".concat("boards","/").concat(t._id),t);case 3:a=e.sent,e.next=9;break;case 6:return e.next=8,w("".concat("boards"),t);case 8:a=e.sent;case 9:return e.abrupt("return",a);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var V,X=a(258),Q=a.n(X),Z={setup:function(){V=Q()("/")},terminate:function(){V=null},on:function(e,t){V.on(e,t)},off:function(e,t){V.off(e,t)},emit:function(e,t){V.emit(e,t)}};function $(e){return function(t){z.get(e).then((function(e){t({type:"SET_BOARD",board:e})}))}}function ee(e){return function(t,a){t({type:"SET_CARD",card:e}),Z.emit("updateBoard",a().board.currBoard),z.save(a().board.currBoard)}}function te(e){return function(t){t({type:"SET_BOARD",board:e}),Z.emit("updateBoard",e),z.save(e)}}var ae=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.bgs,a=e.type,n=e.changeBgColor;return r.a.createElement("ul",{className:"bg-color-list clean-list flex wrap"},t.map((function(e,t){return r.a.createElement("li",{key:t,className:"bg-color-li",onClick:function(){return n(e)},style:"color"===a?{backgroundColor:e}:{backgroundImage:"url(".concat(e,")"),backgroundSize:"cover"}})})))}}]),a}(r.a.Component),ne=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={board:{title:"",bg:"#122961"},bgColors:["#fd9644","#fc5c65","#fed330","#26de81","#2bcbba","#45aaf2","#4b7bec","#a55eea","#122961"],bgImgs:["assets/img/bg-beach.jpg","assets/img/bg-flowers.jpg","assets/img/bg-sunset.jpg","assets/img/bg-view.jpg","assets/img/bg-view2.jpg","assets/img/bg-view3.jpg","assets/img/bg-view4.jpg","assets/img/bg-water.jpg","assets/img/bg-view5.jpg"],bgBy:"color"},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState((function(e){return{board:Object(b.a)(Object(b.a)({},e.board),{},Object(g.a)({},n,r))}}))},e.onHandleSubmit=function(t){var a;t.preventDefault();var n=e.state.board;n.title&&(n.members=[e.props.loggedInUser],n.stacks=[],n.createdAt=Date.now(),n.createdBy=e.props.loggedInUser,n.activities=[],n.boardLabels=[{id:"101",title:"done",color:"#61bd4f"},{id:"102",title:"error",color:"#f2d600"},{id:"103",title:"design",color:"#ff9f1a"},{id:"104",title:"feature",color:"#eb5a46"},(a={id:"105",title:"bug"},Object(g.a)(a,"id","106"),Object(g.a)(a,"color","#c377e0"),a),{id:"107",title:"warning",color:"#0079bf"}],e.props.addBoard(n),e.setState({board:""}),e.props.onClose())},e.changeBgColor=function(t){e.setState((function(e){return{board:Object(b.a)(Object(b.a)({},e.board),{},{bg:t})}}))},e}return Object(i.a)(a,[{key:"onChangeBgBy",value:function(e){this.setState({bgBy:e})}},{key:"render",value:function(){var e=this,t=this.state,a=t.board,n=t.bgColors,o=t.bgImgs,s=t.bgBy,c=this.props.onClose;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"screen",onClick:c},r.a.createElement("div",{className:"add-board-container modal-container",onClick:function(e){return e.stopPropagation()},style:{backgroundColor:"unset",width:"fit-content"}},r.a.createElement("img",{src:"assets/img/close.png",onClick:c,className:"close-btn",alt:""}),r.a.createElement("form",{onSubmit:this.onHandleSubmit},r.a.createElement("div",{className:"main-form-container flex wrap"},r.a.createElement("div",{className:"main-form",style:{width:"unset",backgroundColor:a.bg,backgroundImage:"url(".concat(a.bg,")"),backgroundSize:"cover"}},r.a.createElement("div",{className:"main-form-header flex space-between"},r.a.createElement("h3",null,"Create Board")),r.a.createElement("input",{name:"title",className:"board-title",value:a.title,placeholder:"Add board title",onChange:this.handleChange,autoComplete:"off",required:!0}),r.a.createElement("div",{className:"bg-btns-container"},r.a.createElement(d.a,{className:"clean-link bg-btn",to:"#",onClick:function(){return e.onChangeBgBy("color")}},"Background Color"),r.a.createElement(d.a,{className:"clean-link bg-btn",to:"#",onClick:function(){return e.onChangeBgBy("image")}},"Background Image"))),r.a.createElement("div",{className:"bg-color-container flex "},r.a.createElement(ae,{bgs:"color"===s?n:o,type:s,changeBgColor:this.changeBgColor}))),r.a.createElement("div",{className:"modal-footer flex justify-end"},r.a.createElement("button",{className:"create-board-btn btn btn-success"},"Create Board"))))))}}]),a}(r.a.Component),re={addBoard:function(e){return function(t){z.save(e).then((function(e){return t({type:"ADD_BOARD",board:e})}))}}},oe=Object(E.b)((function(e){return{loggedInUser:e.user.loggedInUser}}),re)(ne),se=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isAddOpen:!1},e.toggleAddShown=function(){e.setState((function(e){return{isAddOpen:!e.isAddOpen}}))},e}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,this.state.isAddOpen&&r.a.createElement(oe,{onClose:this.toggleAddShown}),r.a.createElement("div",{className:"boards-list"},this.props.boards.map((function(e){return r.a.createElement(q,{key:e._id,board:e})})),r.a.createElement("button",{className:"add-new-board board-item",onClick:this.toggleAddShown},"Create new board")))}}]),a}(r.a.Component);function ce(){return r.a.createElement("div",{className:"screen loader-screen"},r.a.createElement("div",{className:"loader"}))}var ie=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=Object(v.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.props.loggedInUser){e.next=2;break}return e.abrupt("return",this.props.history.push("/"));case 2:return e.next=4,this.props.loadBoards(this.props.loggedInUser._id);case 4:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.loggedInUser,a=e.boards;return t?r.a.createElement("div",{className:"container flex justify-center"},r.a.createElement("div",{className:"form-container boards-page"},r.a.createElement("header",{className:"boards-header wrap flex space-between"},r.a.createElement("h2",{className:"boards-title"},"My Boards"),r.a.createElement(d.a,{to:"/profile",className:"hello-btn"},"Hello ",t.username)),r.a.createElement(se,{boards:a}))):r.a.createElement(ce,null)}}]),a}(r.a.Component),le={loadBoards:function(e){return function(t){return z.query(e).then((function(e){return t({type:"SET_BOARDS",boards:e})}))}}},ue=Object(E.b)((function(e){return{boards:e.board.boards,loggedInUser:e.user.loggedInUser}}),le)(ie),me=a(55),de=a(76),pe=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isOpen:!1,title:""},e.addItem=function(t){if(t.preventDefault(),t.target&&""!==t.target.name.value&&void 0!==t.target.name.value){var a=t.target.name.value,n=e.props,r=n.loggedInUser,o=n.type;switch(e.props.currBoard.activities.unshift({id:L(),txt:"added new ".concat("stack"===o?"list":o,": ").concat(a),createdAt:Date.now(),byMember:r}),o){case"stack":e.props.onStackAdd(a);break;case"card":var s=e.props.itemId;e.props.onCardAdd(a,s)}e.setState({isOpen:!1,title:""})}},e.handleChange=function(t){var a=t.target.value;e.setState({title:a})},e.toggleOpen=function(t){t.preventDefault(),e.setState((function(e){return{isOpen:!e.isOpen}}))},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state,t=e.title,a=e.isOpen,n=this.props.type;return r.a.createElement("div",{className:"add-content-container flex align-start add-".concat(n),style:{padding:"stack"===n?"10px 20px":"10px 15px",fontSize:"stack"===n?16:14,color:"stack"===n?"#ffffff":"#888888",minWidth:"stack"===n?250:"100%",maxWidth:"stack"===n?250:"100%",borderTopLeftRadius:"stack"===n?3:0,borderTopRightRadius:"stack"===n?3:0}},a?r.a.createElement(r.a.Fragment,null,r.a.createElement("form",{onSubmit:this.addItem,className:"add-content flex column align-start ".concat("stack"===n?"":"card-add-content")},r.a.createElement("input",{name:"name",autoComplete:"off",onChange:this.handleChange,value:t,placeholder:"Enter ".concat("stack"===n?"list":n," title..."),className:"input ".concat("stack"===n?"stack-input":"card-input"),style:{padding:"8px 12px"},autoFocus:!0}),r.a.createElement("span",{className:"add-content-buttons flex space-between"},r.a.createElement("button",{className:"btn btn-".concat("stack"===n?"primary":"success"," btn-small")},"Add ".concat(n)),r.a.createElement("img",{src:"/assets/img/close".concat("stack"===n?"-stack":"",".png"),onClick:this.toggleOpen,className:"close-add-icon",alt:""})))):r.a.createElement(r.a.Fragment,null,r.a.createElement(d.a,{to:"#",onClick:this.toggleOpen,className:"add-content-title"},"Add ".concat("stack"===n?"list":n))))}}]),a}(r.a.Component),ge=Object(E.b)((function(e){return{currBoard:e.board.currBoard,loggedInUser:e.user.loggedInUser}}))(pe),fe=a(30),he=a.n(fe);function be(e){var t=e.card,a=e.innerRef,n=e.provided,o=e.style,s=e.labelsOpen,c="",i=0;t.checklists&&t.checklists.length&&(c=function(){var e=0;return t.checklists.forEach((function(t){i+=t.todos.length,t.todos.forEach((function(t){t.isDone&&(e+=1)}))})),"".concat(e,"/").concat(i)}());var l="";t.dueDate&&""!==t.dueDate&&(l="due-date-"+function(){var e=Date.now();return Date.parse(t.dueDate)>e?"future":"past"}());var u=t.comments.length||""!==t.description||i||""!==t.dueDate;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",Object.assign({className:"card-preview flex column align-center justify-center",onClick:function(){e.history.push(e.link)},ref:a,style:o},n.draggableProps,n.dragHandleProps),r.a.createElement("div",{className:"card-preview-content",style:{background:o.background}},t.labels.length?r.a.createElement("div",{className:"card-labels flex wrap align-center",onClick:function(t){return t.stopPropagation(),void e.onToggleLabels()}},t.labels.map((function(e){return r.a.createElement("div",{className:"card-label flex align-center justify-center ".concat(s?"label-expand":""),key:e.title+t.id,style:{background:e.color}},s?e.title:"")}))):null,t.imgUrl&&r.a.createElement("img",{src:t.imgUrl,className:"card-img",alt:""}),r.a.createElement("p",{className:"card-preview-title ".concat(t.labels.length?"top-margin":"")},e.title),u?r.a.createElement("div",{className:"card-preview-info flex align-center space-start"},t.dueDate&&""!==t.dueDate?r.a.createElement("span",{className:"preview-info-span flex align-center due-date ".concat(l)},r.a.createElement("img",{className:"preview-info-img",src:"/assets/img/clock.png",alt:""}),r.a.createElement("p",{className:"preview-info-count"},he()(t.dueDate).format("MMM DD"))):null,""!==t.description?r.a.createElement("span",{className:"preview-info-span flex align-center"},r.a.createElement("img",{className:"preview-info-img",src:"/assets/img/description.png",alt:""})):null,t.comments.length?r.a.createElement("span",{className:"preview-info-span flex align-center"},r.a.createElement("img",{className:"preview-info-img",src:"/assets/img/comment.png",alt:""}),r.a.createElement("p",{className:"preview-info-count"},t.comments.length)):null,t.checklists&&i?r.a.createElement("span",{className:"preview-info-span flex align-center"},r.a.createElement("img",{className:"preview-info-img",src:"/assets/img/todos.png",alt:""}),r.a.createElement("p",{className:"preview-info-count"},c)):null):null)))}var ve=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.innerRef,a=e.provided,n=e.style,o=e.children;return r.a.createElement("div",Object.assign({className:"stack flex column space-start",ref:t,style:n},a.droppableProps),o)}}]),a}(r.a.Component),Ee=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={textAreaHeight:35,textAreaMinHeight:0},e.setDescHeight=function(t){13===t.keyCode&&e.setState((function(e){return{textAreaHeight:20+e.textAreaHeight}}))},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.props.description.split(/\r\n|\r|\n/).length<5?this.setState({textAreaMinHeight:"50px"}):this.setState({textAreaMinHeight:"150px"})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"card-desc-container"},r.a.createElement("div",{className:"card-mini-title flex align-center"},r.a.createElement("img",{src:"/assets/img/description.png",alt:""}),r.a.createElement("label",{className:"card-txt-title",htmlFor:"cardDesc"},"Description")),r.a.createElement("form",{className:"main-content-card-action",onSubmit:this.props.onSaveDesc},r.a.createElement("textarea",{name:"description",value:this.props.description,onChange:this.props.handleChange,onFocus:function(){return e.props.isShown(!0)},className:"card-desc",onKeyUp:this.setDescHeight,style:{minHeight:this.state.textAreaMinHeight,height:this.state.textAreaHeight},id:"cardDesc",placeholder:"Add your card description..."}),this.props.isSubmitShown&&r.a.createElement("div",{className:"desc-btns-container flex align-center"},r.a.createElement("button",{className:"btn btn-primary btn-save-desc"},"Save Changes"),r.a.createElement(d.a,{to:"#",className:"cancel-changes",onClick:function(){return e.props.isShown(!1,!0)}},r.a.createElement("img",{className:"close-btn-desc",src:"/assets/img/close.png",alt:""})))))}}]),a}(n.Component),ke=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).myRef=r.a.createRef(),n}return Object(i.a)(a,[{key:"componentDidUpdate",value:function(e){this.props.isFocusComment!==e.isFocusComment&&this.myRef.current.focus()}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card-mini-title flex align-center"},r.a.createElement("img",{src:"/assets/img/comment.png",alt:""}),r.a.createElement("label",{className:"card-txt-title",htmlFor:"cardComment"},"Comments")),r.a.createElement("div",{className:"main-content-card-action"},r.a.createElement("form",{onSubmit:this.props.onAddComment},r.a.createElement("input",{ref:this.myRef,name:"comment",className:"comment-input input",autoComplete:"off",onChange:this.props.handleChange,id:"cardComment",placeholder:"Your comment...",value:this.props.comment}),r.a.createElement("button",{className:"btn-primary comment-btn"},"Add Comment")),r.a.createElement("div",{className:"comments-container"},this.props.comments&&this.props.comments.map((function(t,a){return r.a.createElement("div",{className:"comment flex align-start column",key:a},r.a.createElement("div",{className:"flex align-center"},r.a.createElement("div",{className:"member flex justify-center align-center",style:{backgroundImage:"url(".concat(t.byMember.imgUrl,")"),backgroundColor:t.byMember.bgColor}},r.a.createElement("span",{className:"member-two-chars"},e.props.getTwoChars(t.byMember.fullname))),r.a.createElement("div",null,r.a.createElement("span",{className:"comment-title-fullname"},t.byMember.fullname),r.a.createElement("span",{className:"comment-title-time"},he()(t.createdAt).fromNow()))),r.a.createElement("div",{className:"comment-txt"},t.txt),r.a.createElement(d.a,{className:"delete-comment",to:"#",onClick:function(){return e.props.removeComment(t)}},"Delete"))})))))}}]),a}(n.Component),ye=a(270);a(365);function Ce(e){var t=e.value?new Date(e.value):new Date;return r.a.createElement("div",null,r.a.createElement(ye.a,{onChange:e.onChange,calendarType:"US",value:t,locale:"en-GB",name:"dueDate"}),r.a.createElement("div",{className:"btns-container flex space-between"},r.a.createElement("button",{className:"btn btn-primary btn-save",onClick:function(){e.onSubmitDate(),e.onToggleAction("dueDate")}},"Save"),r.a.createElement("button",{className:"btn btn-danger btn-remove",onClick:function(){e.removeDueDate(),e.onToggleAction("dueDate")}},"Remove")))}var Se=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={colors:[{title:"#fd9644",isChecked:!1},{title:"#fc5c65",isChecked:!1},{title:"#fed330",isChecked:!1},{title:"#26de81",isChecked:!1},{title:"#2bcbba",isChecked:!1},{title:"#45aaf2",isChecked:!1},{title:"#4b7bec",isChecked:!1},{title:"#a55eea",isChecked:!1},{title:"#122961",isChecked:!1},{title:"#ec7dd5",isChecked:!1}],colorChecked:"",title:""},e.isColorChecked=function(t){e.setState((function(e){return{colorChecked:t,colors:e.colors.map((function(e){return e.title===t?e.isChecked=!0:e.isChecked=!1,e}))}}))},e.changeLabel=function(t){var a=e.state.colorChecked?e.state.colorChecked:"",n=e.state.title?e.state.title:"";console.log("title",n,"color",a),e.props.onChagneLabelColor(t,a,n)},e.onChangeTitle=function(t){var a=t.target.value;e.setState({title:a})},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.labelSelected,n=t.onBackToLabels;return r.a.createElement("div",{className:"change-label-container"},r.a.createElement("div",{className:"flex align-center header-container"},r.a.createElement("div",{onClick:n},r.a.createElement("img",{src:"/assets/img/back.png",alt:""})),r.a.createElement("h4",null,"EDIT LABEL")),r.a.createElement("div",null,r.a.createElement("input",{type:"text",className:"input label-title",autocomplete:"off",placeholder:"Change title",value:this.state.title,onChange:this.onChangeTitle})),r.a.createElement("div",{className:"flex wrap align-center justify-center"},this.state.colors.map((function(t,a){return r.a.createElement("div",{key:a,className:"label-color-item flex align-center justify-center",onClick:function(){return e.isColorChecked(t.title)},style:{backgroundColor:t.title}},t.isChecked&&r.a.createElement("img",{src:"/assets/img/icon-checked-white.png",alt:""}))}))),r.a.createElement("div",{className:"btns-container flex space-between"},r.a.createElement("button",{className:"btn btn-primary btn-save",onClick:function(){e.changeLabel(a),n()}},"Save")))}}]),a}(n.Component),we=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isChangeShown:!1,labelSelected:""},e.isLabelChecked=function(t){var a=e.props.card;return a.labels||(a.labels=[]),!!a.labels.find((function(e){return t===e.id}))},e.onEditLabel=function(t){e.setState((function(e){return{isChangeShown:!e.isChangeShown,labelSelected:t}}))},e.onBackToLabels=function(){e.setState((function(e){return{isChangeShown:!e.isChangeShown}}))},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.addLabel,n=t.onChagneLabelColor,o=t.board,s=this.state,c=s.labelSelected,i=s.isChangeShown;return r.a.createElement(r.a.Fragment,null,!i&&o.boardLabels.map((function(t,n){return r.a.createElement("div",{key:n,className:"flex align-center space-between"},r.a.createElement("div",{className:"label-item flex align-center space-between",style:{backgroundColor:t.color},onClick:function(){return a(t)}},t.title.charAt(0).toUpperCase()+t.title.slice(1),e.isLabelChecked(t.id)?r.a.createElement("img",{src:"/assets/img/icon-checked-white.png",alt:""}):""),r.a.createElement("div",{className:"edit-icon",onClick:function(){return e.onEditLabel(t.id)}},r.a.createElement("img",{src:"/assets/img/edit.svg"})))})),i&&c&&r.a.createElement(Se,{labelSelected:c,onChagneLabelColor:n,onBackToLabels:this.onBackToLabels}))}}]),a}(n.Component),Oe=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={byMember:""},e.handleChange=function(t){var a=t.target.value;e.setState({byMember:a})},e.isMemberChecked=function(t){return!!e.props.getCurrCard().members.find((function(e){return t===e._id}))},e.getMembers=function(){var t=e.state.byMember;return t?e.props.board.members.filter((function(e){return e.username.includes(t)})):e.props.board.members},e}return Object(i.a)(a,[{key:"getTwoChars",value:function(e){var t;return(t=2!==e.split(" ").length?null===e||void 0===e?void 0:e.charAt(0):(null===e||void 0===e?void 0:e.charAt(0))+e.split(" ")[1].charAt(0))||(t=""),t}},{key:"render",value:function(){var e=this,t=this.props.addMember,a=this.getMembers;return r.a.createElement("div",{className:"card-members-container"},r.a.createElement("div",{className:"search-input"},r.a.createElement("input",{type:"text",className:"input search-members",value:this.state.byMember,autoComplete:"off",placeholder:"Search member",onChange:this.handleChange})),r.a.createElement("div",{className:"members-list-container"},r.a.createElement("h4",null,"BOARD MEMBERS"),r.a.createElement("div",{className:"members-list"},a().map((function(a){return r.a.createElement("div",{key:a._id,className:"member-item flex space-between align-center",onClick:function(){return t(a)}},r.a.createElement("div",{className:"flex align-center"},r.a.createElement("div",{className:"member flex justify-center align-center",style:{backgroundImage:"url(".concat(a.imgUrl,")"),backgroundColor:a.bgColor}},r.a.createElement("span",{className:"member-two-chars"},e.getTwoChars(a.fullname))),r.a.createElement("span",{className:"members-card-title"},a.username)),e.isMemberChecked(a._id)?r.a.createElement("img",{src:"/assets/img/icon-checked.png"}):"")})))))}}]),a}(r.a.Component),Ne=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={selectIsShown:!1},e.onToggleSelect=function(){e.setState((function(e){return{selectIsShown:!e.selectIsShown}}))},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.card,n=t.board,o=this.state.selectIsShown;return r.a.createElement("div",{className:"card-move-container"},r.a.createElement("h4",null,"SELECT DESTINATION"),r.a.createElement("div",{className:"select-stack",onClick:this.onToggleSelect},"Select list"),o&&r.a.createElement("div",{className:"selection-container"},n.stacks.map((function(t,n){return t.cards.find((function(e){return e.id===a.id}))?null:r.a.createElement("div",{key:n,className:"option-stack-name",onClick:function(){return e.props.moveCardToStack(t)}},t.title)}))))}}]),a}(r.a.Component),je=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={timeEstimation:{hours:"",minutes:"",days:""}},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState((function(e){return{timeEstimation:Object(b.a)(Object(b.a)({},e.timeEstimation),{},Object(g.a)({},n,r))}}))},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.card.timeEstimation;e&&this.setState({timeEstimation:e})}},{key:"render",value:function(){var e=this,t=this.props,a=t.card,n=t.onAddTimeEstimation,o=t.removeCardEstimation,s=t.onToggleAction;return console.log("card",a),r.a.createElement("div",{className:"card-time-estimation-container"},r.a.createElement("h4",null,"SELECT TIME ESTIMATION"),r.a.createElement("div",null,"Days:",r.a.createElement("input",{type:"number",name:"days",className:"input input-time-estimation",onChange:this.handleChange,autoComplete:"off",value:this.state.timeEstimation.days,placeholder:"".concat(a.timeEstimation?a.timeEstimation.days:"00")})),r.a.createElement("div",null,"Hours:",r.a.createElement("input",{type:"number",name:"hours",className:"input input-time-estimation",onChange:this.handleChange,autoComplete:"off",value:this.state.timeEstimation.hours,placeholder:"".concat(a.timeEstimation?a.timeEstimation.hours:"00")})),r.a.createElement("div",null,"Minutes:",r.a.createElement("input",{type:"number",name:"minutes",className:"input input-time-estimation",onChange:this.handleChange,autoComplete:"off",value:this.state.timeEstimation.minutes,placeholder:"".concat(a.timeEstimation?a.timeEstimation.minutes:"00")})),r.a.createElement("div",{className:"btns-container flex space-between"},r.a.createElement("button",{className:"btn btn-primary btn-save",onClick:function(){n(e.state.timeEstimation),s("timeEstimation")}},"Save"),r.a.createElement("button",{className:"btn btn-danger btn-remove",onClick:function(){o(),s("timeEstimation")}},"Remove")))}}]),a}(r.a.Component);function xe(e){var t=e.type;return r.a.createElement("div",{className:"remove-board-container remove-card"},r.a.createElement("div",{className:"remove-board-title remove-card-title flex align-center space-between"},"Remove ".concat(t&&"stack"===t?"list":"card"),r.a.createElement("img",{src:"/assets/img/close.png",className:"close-icon",onClick:function(){return e.onToggleRemoveStack()},alt:""})),r.a.createElement("p",null,"Are you sure?"),t&&"stack"===t?r.a.createElement("button",{className:"btn btn-danger btn-remove-card",onClick:function(){return e.onRemoveStack()}},"Yes, remove!"):r.a.createElement("button",{className:"btn btn-danger btn-remove-card",onClick:function(){return e.onRemoveCard()}},"Yes, remove!"))}var Te=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={stackTitle:""},e.onEditStackTitle=function(t){var a=t.target;e.setState({stackTitle:a.value})},e.onNewStackTitle=function(t){t.preventDefault();var a=Object(b.a)({},e.props.currBoard),n=e.state.stackTitle,r=a.stacks.findIndex((function(t){return t.id===e.props.stack.id}));a.stacks[r].title=n,e.props.save(a),e.props.onToggleAction("stack")},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.setState({stackTitle:this.props.stack.title})}},{key:"render",value:function(){var e=this.state.stackTitle;return r.a.createElement("form",{onSubmit:this.onNewStackTitle,className:"stack-title-form flex column"},r.a.createElement("label",{htmlFor:"stackTitle"},"Change Stack Title:"),r.a.createElement("div",{className:"flex space-between"},r.a.createElement("input",{autoComplete:"off",id:"stackTitle",type:"text",name:"title",onChange:this.onEditStackTitle,value:e}),r.a.createElement("button",{className:"btn btn-primary"},"Save")))}}]),a}(n.Component),Be={save:te},De=Object(E.b)((function(e){return{currBoard:e.board.currBoard}}),Be)(Te),Ae=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isOpenModalRemove:!1},e.onToggleRemoveStack=function(){e.setState((function(e){return{isOpenModalRemove:!e.isOpenModalRemove}}))},e.onRemoveStack=function(){e.props.onStackRemove(e.props.stack.id)},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.state.isOpenModalRemove,t=this.props,a=t.stack,n=t.onToggleAction;return r.a.createElement(r.a.Fragment,null,r.a.createElement("ul",{className:"stack-menu-list"},r.a.createElement(De,{onToggleAction:n,stack:a,onToggleChangeTitle:this.onToggleChangeTitle,onChangeTitle:this.onChangeTitle}),r.a.createElement("li",{className:"stack-menu-item",onClick:this.onToggleRemoveStack},r.a.createElement("div",{className:"stack-menu-remove"},"Remove List"))),e&&r.a.createElement(xe,{type:"stack",onToggleRemoveStack:this.onToggleRemoveStack,onRemoveStack:this.onRemoveStack}))}}]),a}(r.a.Component);function Ue(e){return r.a.createElement("div",{className:"card-bg-container flex wrap justify-center"},["#fd9644","#fc5c65","#fed330","#26de81","#2bcbba","#45aaf2","#4b7bec","#a55eea","#122961","#fff","#000","#f8a5c2"].map((function(t,a){return r.a.createElement("div",{key:a,className:"card-bg",onClick:function(){return e.onChangeBgColor(t)},style:{backgroundColor:t}})})))}var Ie=a(86),Me=a.n(Ie),Re=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={action:null},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.checkAction()}},{key:"checkAction",value:function(){var e=this.props.isShown;for(var t in e)e[t]&&this.setState({action:t})}},{key:"titleToReturn",value:function(e){switch(e){case"dueDate":return"Change Due Date";case"label":return"Labels";case"members":return"Add Members";case"move":return"Move Card";case"timeEstimation":return"Time Estimation";case"stack":return this.props.stack.title;case"bgColor":return"Change Background Color"}}},{key:"render",value:function(){var e,t=this.props,a=t.isShown,n=t.card,o=t.onToggleAction,s=t.board,c=t.onChange,i=t.value,l=t.onSubmitDate,u=t.getCurrCard,m=t.addLabel,d=t.addMember,p=t.removeDueDate,f=t.moveCardToStack,h=t.onAddTimeEstimation,b=t.removeCardEstimation,v=t.stack,E=t.onStackRemove,k=t.onChangeBgColor,y=t.onChagneLabelColor,C=this.state,S=C.action;C.labelId;return r.a.createElement(Me.a,{onOutsideClick:function(){return o(S)},display:"contents"},r.a.createElement("div",{className:"action-container"},r.a.createElement("div",{className:"action-header flex space-between align-center"},r.a.createElement("h3",null,this.titleToReturn(S)),r.a.createElement("button",{className:"close-label",onClick:function(){return o(S)}},r.a.createElement("img",{src:"/assets/img/close.png",alt:""}))),a.label&&r.a.createElement(we,(e={card:n,board:this.props.board,onChagneLabelColor:y,addLabel:m},Object(g.a)(e,"card",n),Object(g.a)(e,"onToggleAction",o),e)),a.dueDate&&r.a.createElement(Ce,{onChange:c,value:i,onToggleAction:o,removeDueDate:p,onSubmitDate:l}),a.members&&r.a.createElement(Oe,{board:s,getCurrCard:u,card:n,addMember:d}),a.bgColor&&r.a.createElement(Ue,{board:s,onToggleAction:o,getCurrCard:u,card:n,onChangeBgColor:k}),a.move&&r.a.createElement(Ne,{board:s,card:n,moveCardToStack:f}),a.timeEstimation&&r.a.createElement(je,{card:n,onToggleAction:o,onAddTimeEstimation:h,removeCardEstimation:b}),a.stack&&r.a.createElement(Ae,{board:s,onToggleAction:o,stack:v,onStackRemove:E})))}}]),a}(n.Component),Le=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={newTodo:{title:"",isDone:!1},checklist:{title:"",todos:[]}},e.onEditChecklistTitle=function(t){var a=t.target.value;e.setState({checklist:{title:a}})},e.onSaveChecklistTitle=function(){e.props.onEditChecklistTitle(e.props.checklist.id,e.state.checklist.title)},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState((function(e){return{newTodo:Object(b.a)(Object(b.a)({},e.newTodo),{},Object(g.a)({},n,r))}}))},e.onAddTodo=function(t){t.preventDefault(),e.props.addTodo(e.props.checklist.id,e.state.newTodo),e.setState({newTodo:{title:"",isDone:!1}})},e.calculateProgBarWidth=function(){var t=0;return e.props.checklist.todos.forEach((function(e){e.isDone&&t++})),e.props.checklist.todos.length?(t/e.props.checklist.todos.length*100).toFixed(0):0},e.calculateProgBarBgc=function(){return"100"===e.calculateProgBarWidth()?"#61bd4f":"#0079bf"},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.setState({checklist:{title:this.props.checklist.title,todos:this.props.checklist.todos}})}},{key:"render",value:function(){var e=this,t=this.props.checklist,a=t.todos,n=t.id,o=this.props.card,s=this.calculateProgBarWidth(),c=this.calculateProgBarBgc();return r.a.createElement("div",{className:"card-checklist-container"},r.a.createElement("div",{className:"card-checklist-title flex align-center space-between"},r.a.createElement("div",{className:"checklist-title flex align-center"},r.a.createElement("img",{src:"/assets/img/todos.png"}),r.a.createElement("input",{type:"text",name:"title",className:"checklist-title",autoComplete:"off",onChange:this.onEditChecklistTitle,onBlur:this.onSaveChecklistTitle,value:this.state.checklist.title})),r.a.createElement("button",{className:"btn btn-delete",onClick:function(){return e.props.onRemoveChecklist(e.props.checklist)}},"Delete")),r.a.createElement("div",{className:"checklist-main"},r.a.createElement("div",{className:"checklist-progress-bar-container"},r.a.createElement("span",null,"".concat(s,"%")),r.a.createElement("div",{className:"checklist-progress-bar"},r.a.createElement("div",{className:"progress-bar",style:{width:"".concat(s,"%"),backgroundColor:"".concat(c)}}))),r.a.createElement("div",{className:"checklist-todos-container"},a.map((function(t){return r.a.createElement("div",{className:"flex align-center todo-item space-between",key:t.id},r.a.createElement("div",{className:"todo-check-container flex align-center"},r.a.createElement("div",{className:t.isDone?"checkbox done":"checkbox",onClick:function(a){return e.props.onUpdateTodo(a,t,e.props.checklist,!0)}}),r.a.createElement("input",{name:"title",autoComplete:"off",className:"checklist-title todo-title ".concat(t.isDone?"done-decoration":"d"),value:t.title,onChange:function(a){return e.props.onUpdateTodo(a,t,e.props.checklist)},onBlur:function(){return e.props.saveCard(o)}})),r.a.createElement("div",{className:"todo-delete-btn-container"},r.a.createElement("img",{className:"todo-delete-btn",src:"/assets/img/close.png",onClick:function(){return e.props.onRemoveTodo(n,t)}})))})),r.a.createElement("form",{onSubmit:this.onAddTodo},r.a.createElement("input",{type:"text",name:"title",className:"checklist-title todo-title add-todo",onChange:this.handleChange,placeholder:"Add New Todo",autoComplete:"off",value:this.state.newTodo.title})))))}}]),a}(r.a.Component),Fe={saveCard:ee},Pe=Object(E.b)(null,Fe)(Le);function _e(e){var t=e.card,a=e.getTwoChars;return r.a.createElement(r.a.Fragment,null,(0!==t.members.length||0!==t.labels.length||t.dueDate)&&r.a.createElement("div",{className:"members-labels-container flex wrap"},0!==t.members.length&&r.a.createElement("div",{className:"member-card-container"},r.a.createElement("h3",null,"Members"),r.a.createElement("div",{className:"flex wrap"},t.members.map((function(e,t){return r.a.createElement("div",{key:t,className:"member flex justify-center align-center",style:{backgroundImage:"url(".concat(e.imgUrl,")"),backgroundColor:e.bgColor}},r.a.createElement("span",{className:"member-two-chars"},a(e.fullname)))})))),0!==t.labels.length&&r.a.createElement("div",{className:"labels-card-container"},r.a.createElement("h3",null,"Labels"),r.a.createElement("div",{className:"flex wrap"},t.labels.map((function(e,t){return r.a.createElement("div",{key:t,className:"card-label-item",style:{backgroundColor:"".concat(e.color)}},e.title)})))),t.dueDate&&r.a.createElement("div",{className:"due-date-container"},r.a.createElement("h3",null,"Due date"),r.a.createElement("div",{className:"flex align-center justify-center time-container"},he()(t.dueDate).format("MMM DD")))))}function He(e){return r.a.createElement("div",{className:"card-img-container"},r.a.createElement("div",{className:"card-mini-title flex align-center space-between"},r.a.createElement("div",null,r.a.createElement("img",{src:"/assets/img/style.png"}),r.a.createElement("label",{className:"card-txt-title"},"Image")),r.a.createElement("button",{className:"btn btn-delete",onClick:function(){return e.onRemoveImg()}},"Delete")),r.a.createElement("div",{className:"card-img"},e.isUploadImg?r.a.createElement("div",{className:"loading"},r.a.createElement("div",{className:"dot"}),r.a.createElement("div",{className:"dot"}),r.a.createElement("div",{className:"dot"}),r.a.createElement("div",{className:"dot"}),r.a.createElement("div",{className:"dot"})):r.a.createElement("img",{src:"".concat(e.card.imgUrl)})))}function We(e){var t=e.activities;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"card-mini-title flex align-center"},r.a.createElement("img",{src:"/assets/img/activity.png"}),r.a.createElement("span",{className:"card-txt-title",htmlFor:"cardComment"},"Activities")),r.a.createElement("div",{className:"main-content-card-action"},r.a.createElement("div",{className:"comments-container"},t&&t.map((function(t,a){return r.a.createElement("div",{className:"comment flex align-start column",key:a},r.a.createElement("div",{className:"flex align-center"},r.a.createElement("div",{className:"member flex justify-center align-center",style:{backgroundImage:"url(".concat(t.byMember.imgUrl,")"),backgroundColor:t.byMember.bgColor}},r.a.createElement("span",{className:"member-two-chars"},e.getTwoChars(t.byMember.fullname))),r.a.createElement("div",{className:"flex align-center"},r.a.createElement("span",{className:"comment-title-fullname"},t.byMember.fullname),r.a.createElement("div",{className:"activity-txt"},t.txt))),r.a.createElement("span",{className:"comment-title-time activity-time"},he()(t.createdAt).fromNow()))})))))}var qe=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.card.timeEstimation;return r.a.createElement(r.a.Fragment,null,(e.days||e.hours||e.minutes)&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{className:"time-estimation-title"},"Time Estimation"),r.a.createElement("div",{className:"show-time-estimation flex align-center space-between"},r.a.createElement("div",null,e.days?r.a.createElement("span",null,e.days," days "):"",e.hours?r.a.createElement("span",null," ",e.hours," hours "):"",e.minutes?r.a.createElement("span",null," ",e.minutes," minutes"):""),!e.approved&&r.a.createElement("div",{className:"flex align-center justify-center"},r.a.createElement("span",{onClick:this.props.onApproveTimeEstimation},r.a.createElement("img",{src:"/assets/img/approve.png",title:"Approve",alt:""})),r.a.createElement("span",{onClick:this.props.onFocusComment},r.a.createElement("img",{src:"/assets/img/small-comment.png",title:"Comment",alt:""}))))))}}]),a}(r.a.Component),ze=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={card:null,prevCardDesc:"",isShown:{label:!1,dueDate:!1,members:!1,move:!1,timeEstimation:!1,bgColor:!1},comment:{txt:""},isUploadImg:!1,isFinishUpload:!1,isOpenModalRemove:!1,dueDateNotSave:"",isFocusComment:!1},e.loadCard=function(){var t=e.getCurrCard();e.setState({card:t},(function(){return e.setState({prevCardDesc:e.state.card.description})}))},e.getCurrCard=function(){var t,a=e.props.match.params.cardId;return e.props.currBoard.stacks.some((function(e){return t=e.cards.find((function(e){return e.id===a}))})),t||e.props.history.push("/boards")},e.onDescShown=function(t,a){e.setState({isDescShown:t}),!t&&a&&e.setPrevDesc()},e.setPrevDesc=function(){e.setState((function(t){return{card:Object(b.a)(Object(b.a)({},t.card),{},{description:e.state.prevCardDesc})}}))},e.onBackBoard=function(){var t=e.props.match.params.boardId;e.props.history.push("/boards/".concat(t))},e.onChangeDate=function(t){e.setState({dueDateNotSave:t})},e.onSubmitDate=function(){var t=e.props,a=t.currBoard,n=t.loggedInUser;a.activities.unshift({id:L(),txt:"set card due date to \n        ".concat(he()(e.state.dueDateNotSave).format("MMM DD")),createdAt:Date.now(),byMember:n}),e.state.card.activities.unshift({id:L(),txt:"set card due date to \n        ".concat(he()(e.state.dueDateNotSave).format("MMM DD")),createdAt:Date.now(),byMember:n}),e.setState((function(t){return{card:Object(b.a)(Object(b.a)({},t.card),{},{dueDate:e.state.dueDateNotSave})}}),(function(){e.props.saveCard(e.state.card)}))},e.removeDueDate=function(){e.setState((function(e){return{card:Object(b.a)(Object(b.a)({},e.card),{},{dueDate:""})}}),(function(){return e.props.saveCard(e.state.card)}))},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState((function(e){return{card:Object(b.a)(Object(b.a)({},e.card),{},Object(g.a)({},n,r))}}))},e.handleCommentChange=function(t){var a=t.target;e.setState((function(e){return{comment:Object(b.a)(Object(b.a)({},e.comment),{},{txt:a.value})}}))},e.onAddComment=function(t){t.preventDefault();var a=e.state,n=a.comment,r=a.card;n.txt&&(n.id=L(),n.createdAt=Date.now(),n.byMember=e.props.loggedInUser,e.setState((function(e){return{card:Object(b.a)(Object(b.a)({},e.card),{},{comments:[n].concat(Object(me.a)(e.card.comments))})}}),(function(){e.props.saveCard(e.state.card)})),r.activities.unshift({id:L(),txt:"set card comment to ".concat(n.txt),createdAt:Date.now(),byMember:e.props.loggedInUser}),e.setState({comment:{txt:""}}))},e.removeComment=function(t){e.setState((function(e){return{card:Object(b.a)(Object(b.a)({},e.card),{},{comments:e.card.comments.filter((function(e){return e.id!==t.id}))})}}),(function(){e.props.saveCard(e.state.card)})),e.state.card.activities.unshift({id:L(),txt:"removed card comment ".concat(t.txt),createdAt:Date.now(),byMember:e.props.loggedInUser})},e.onEditTitle=function(t){var a=t.target;e.setState((function(e){return{card:Object(b.a)(Object(b.a)({},e.card),{},{title:a.value})}}))},e.onEditTitleFinish=function(){e.state.card.activities.unshift({id:L(),txt:"edited card title to ".concat(e.state.card.title),createdAt:Date.now(),byMember:e.props.loggedInUser}),e.props.saveCard(e.state.card)},e.onSaveDesc=function(t){t.preventDefault(),e.setState({prevCardDesc:e.state.card.description},(function(){e.state.card.activities.unshift({id:L(),txt:"edited card description",createdAt:Date.now(),byMember:e.props.loggedInUser}),e.props.saveCard(e.state.card),e.onDescShown(!1)}))},e.onAddLabel=function(t){var a=e.getCurrCard(),n=a.labels.findIndex((function(e){return e.id===t.id}));-1===n?(e.state.card.activities.unshift({id:L(),txt:"add label: ".concat(t.title," to the card"),createdAt:Date.now(),byMember:e.props.loggedInUser}),a.labels.push(t)):(e.state.card.activities.unshift({id:L(),txt:"removed label: ".concat(t.title," from the card"),createdAt:Date.now(),byMember:e.props.loggedInUser}),a.labels.splice(n,1)),e.setState({card:a},(function(){e.props.saveCard(e.state.card)}))},e.onAddMember=function(t){var a=e.getCurrCard(),n=a.members.findIndex((function(e){return e._id===t._id}));-1===n?(e.state.card.activities.unshift({id:L(),txt:"add member:  ".concat(t.username," to the card"),createdAt:Date.now(),byMember:e.props.loggedInUser}),a.members.push(t)):(e.state.card.activities.unshift({id:L(),txt:"removed member:  ".concat(t.username," from the card"),createdAt:Date.now(),byMember:e.props.loggedInUser}),a.members.splice(n,1)),e.setState({card:a},(function(){e.props.saveCard(e.state.card)}))},e.onAddChecklist=function(){var t={id:L(),title:"Checklist",todos:[]};e.setState((function(e){return{card:Object(b.a)(Object(b.a)({},e.card),{},{checklists:[].concat(Object(me.a)(e.card.checklists),[t])})}}),(function(){e.state.card.activities.unshift({id:L(),txt:"added checklist to the card",createdAt:Date.now(),byMember:e.props.loggedInUser}),e.props.saveCard(e.state.card)}))},e.onEditChecklistTitle=function(t,a){e.setState((function(e){return{card:Object(b.a)(Object(b.a)({},e.card),{},{checklists:e.card.checklists.map((function(e){return e.id===t&&(e.title=a),e}))})}}),(function(){e.props.saveCard(e.state.card)}))},e.onAddTodo=function(t,a,n,r){var o=JSON.parse(JSON.stringify(e.state.card)),s=o.checklists.find((function(e){return e.id===t}));if(a.id){if(r)return e.props.saveCard(o);s.todos.find((function(e){return e.id===a.id})).title=n}else a.id=L(),s.todos.unshift(a),e.props.saveCard(o);e.setState({card:o})},e.onUpdateTodo=function(t,a,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=t.target.value;if(r)return a.isDone=!a.isDone,e.onAddTodo(n.id,a,o,!0);e.onAddTodo(n.id,a,o)},e.onRemoveTodo=function(t,a){e.setState((function(e){return{card:Object(b.a)(Object(b.a)({},e.card),{},{checklists:e.card.checklists.map((function(e){return e.id===t&&(e.todos=e.todos.filter((function(e){return e.id!==a.id}))),e}))})}}),(function(){e.state.card.activities.unshift({id:L(),txt:"removed todo ".concat(a.title," from the card"),createdAt:Date.now(),byMember:e.props.loggedInUser}),e.props.saveCard(e.state.card)}))},e.onRemoveChecklist=function(t){e.setState((function(e){return{card:Object(b.a)(Object(b.a)({},e.card),{},{checklists:e.card.checklists.filter((function(e){return e.id!==t.id}))})}}),(function(){e.state.card.activities.unshift({id:L(),txt:"removed checklist ".concat(t.title," from the card"),createdAt:Date.now(),byMember:e.props.loggedInUser}),e.props.saveCard(e.state.card)}))},e.onToggleAction=function(t){var a=e.state.isShown;for(var n in a)n!==t&&(a[n]=!1);a[t]=!a[t],e.setState({isShown:a})},e.onOpenUpload=function(){e.inputElement.click()},e.onUploadImg=function(){var t=Object(v.a)(h.a.mark((function t(a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({isUploadImg:!0}),t.next=3,P(a);case 3:n=t.sent,e.setState({isUploadImg:!1,isFinishUpload:!0}),e.setState((function(e){return{card:Object(b.a)(Object(b.a)({},e.card),{},{imgUrl:n})}}),(function(){e.state.card.activities.unshift({id:L(),txt:"uploaded image to the card",createdAt:Date.now(),byMember:e.props.loggedInUser}),e.props.saveCard(e.state.card)}));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onRemoveImg=function(){e.setState((function(e){return{card:Object(b.a)(Object(b.a)({},e.card),{},{imgUrl:null})}}),(function(){e.state.card.activities.unshift({id:L(),txt:"removed image from the card",createdAt:Date.now(),byMember:e.props.loggedInUser}),e.props.saveCard(e.state.card)}))},e.moveCardToStack=function(t){e.props.currBoard.stacks.forEach((function(a){var n=a.cards.findIndex((function(t){return t.id===e.state.card.id}));-1!==n&&a.cards.splice(n,1),a.title===t.title&&a.cards.push(e.state.card)})),e.state.card.activities.unshift({id:L(),txt:"moved card to stack ".concat(t.title),createdAt:Date.now(),byMember:e.props.loggedInUser}),e.props.save(e.props.currBoard)},e.onToggleRemoveCard=function(){e.setState((function(e){return{isOpenModalRemove:!e.isOpenModalRemove}}))},e.onRemoveCard=function(){var t=e.props,a=t.currBoard,n=t.save,r=t.history,o=t.loggedInUser;a.isPublic||(a.stacks.forEach((function(t){var a=t.cards.findIndex((function(t){return t.id===e.state.card.id}));-1!==a&&t.cards.splice(a,1)})),a.activities.unshift({id:L(),txt:"has removed a card",createdAt:Date.now(),byMember:o}),n(e.props.currBoard),r.push("/boards/".concat(e.props.currBoard._id)))},e.onAddTimeEstimation=function(t){t.approved=!1,e.setState((function(e){return{card:Object(b.a)(Object(b.a)({},e.card),{},{timeEstimation:t})}}),(function(){e.state.card.activities.unshift({id:L(),txt:"added time estimation to card",createdAt:Date.now(),byMember:e.props.loggedInUser}),e.props.saveCard(e.state.card)}))},e.removeCardEstimation=function(){e.setState((function(e){return{card:Object(b.a)(Object(b.a)({},e.card),{},{timeEstimation:null})}}),(function(){e.state.card.activities.unshift({id:L(),txt:"removed time estimation from the card",createdAt:Date.now(),byMember:e.props.loggedInUser}),e.props.saveCard(e.state.card)}))},e.onApproveTimeEstimation=function(){e.setState((function(e){return{card:Object(b.a)(Object(b.a)({},e.card),{},{timeEstimation:Object(b.a)(Object(b.a)({},e.card.timeEstimation),{},{approved:!0})})}}),(function(){e.state.card.activities.unshift({id:L(),txt:"confirmed the time estimate",createdAt:Date.now(),byMember:e.props.loggedInUser}),e.props.saveCard(e.state.card)}))},e.onFocusComment=function(){e.setState((function(e){return{isFocusComment:!e.isFocusComment}}),(function(){e.setState({comment:{txt:"Comment on time estimation: "}})}))},e.onChangeBgColor=function(t){e.setState((function(e){return{card:Object(b.a)(Object(b.a)({},e.card),{},{bgColor:t})}}),(function(){return e.props.saveCard(e.state.card)})),e.onToggleAction("bgColor")},e.onChagneLabelColor=function(t,a,n){console.log("title",n),e.props.currBoard.boardLabels.find((function(e){e.id===t&&(a&&(e.color=a),n&&(e.title=n))})),e.state.card.labels.find((function(e){e.id===t&&(a&&(e.color=a),n&&(e.title=n))})),e.props.save(e.props.currBoard)},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.props.currBoard&&this.loadCard()}},{key:"componentDidUpdate",value:function(e){this.props.currBoard!==e.currBoard&&this.loadCard()}},{key:"getTwoChars",value:function(e){var t;return(t=2!==e.split(" ").length?null===e||void 0===e?void 0:e.charAt(0):(null===e||void 0===e?void 0:e.charAt(0))+e.split(" ")[1].charAt(0))||(t=""),t}},{key:"render",value:function(){var e,t=this,a=this.state,n=a.card,o=a.isDescShown,s=a.comment,c=a.isShown,i=a.isUploadImg,l=a.isOpenModalRemove,u=a.isFocusComment,m=this.onToggleAction;return n?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"screen",onMouseDown:this.onBackBoard},r.a.createElement("div",{className:"modal-container shadow-drop-2-center card-details-modal",onMouseDown:function(e){return e.stopPropagation()}},r.a.createElement("div",{className:"modal-header flex align-center space-between"},r.a.createElement("div",{className:"task-title-container flex align-center"},r.a.createElement("img",{className:"img-icon",src:"/assets/img/task.png",alt:""}),r.a.createElement("input",{type:"text",name:"title",className:"card-title",onChange:this.onEditTitle,onBlur:this.onEditTitleFinish,value:n.title,autoComplete:"off"})),r.a.createElement("div",{className:"close-modal flex justify-content align-center",onClick:this.onBackBoard},r.a.createElement("img",{className:"img-icon",src:"/assets/img/close.png",alt:""}))),r.a.createElement("div",{className:"card-container flex"},r.a.createElement("aside",{className:"card-content"},n.timeEstimation&&r.a.createElement(qe,{card:n,onApproveTimeEstimation:this.onApproveTimeEstimation,onFocusComment:this.onFocusComment}),r.a.createElement(_e,{card:n,getTwoChars:this.getTwoChars}),r.a.createElement(Ee,{description:n.description,onSaveDesc:this.onSaveDesc,handleChange:this.handleChange,isShown:this.onDescShown,isSubmitShown:o}),(i||n.imgUrl)&&r.a.createElement(He,{card:n,isUploadImg:i,onRemoveImg:this.onRemoveImg}),n.checklists&&n.checklists.map((function(e){return r.a.createElement(Pe,{key:e.id,card:n,onUpdateTodo:t.onUpdateTodo,checklist:e,addTodo:t.onAddTodo,onEditChecklistTitle:t.onEditChecklistTitle,onRemoveTodo:t.onRemoveTodo,onRemoveChecklist:t.onRemoveChecklist})})),r.a.createElement(ke,{isFocusComment:u,comments:n.comments,onAddComment:this.onAddComment,handleChange:this.handleCommentChange,comment:s.txt,getTwoChars:this.getTwoChars,removeComment:this.removeComment}),n.activities&&r.a.createElement(We,{activities:n.activities,getTwoChars:this.getTwoChars})),r.a.createElement("aside",{className:"card-actions"},r.a.createElement("div",{className:"actions-title"},"Actions:"),r.a.createElement("ul",{className:"actions-list clean-list"},r.a.createElement(d.a,{title:"Edit Card Members",to:"#",onClick:function(){return m("members")}},r.a.createElement("li",null,r.a.createElement("img",{src:"/assets/img/user-icon.png",alt:""}),"Members")),r.a.createElement(d.a,{title:"Edit Card Labels",to:"#",onClick:function(){return m("label")}},r.a.createElement("li",null,r.a.createElement("img",{src:"/assets/img/label-icon.png",alt:""}),"Labels")),r.a.createElement(d.a,{title:"Add Checklist",to:"#",onClick:this.onAddChecklist},r.a.createElement("li",null,r.a.createElement("img",{src:"/assets/img/checklist-icon.png",alt:""}),"Checklist")),r.a.createElement(d.a,{title:"Set Due Date",to:"#",onClick:function(){return m("dueDate")}},r.a.createElement("li",null,r.a.createElement("img",{src:"/assets/img/due-date.png",alt:""}),"Due Date")),r.a.createElement(d.a,{title:"Set Time Estimation",to:"#",onClick:function(){return m("timeEstimation")}},r.a.createElement("li",null,r.a.createElement("img",{src:"/assets/img/clock-icon.png",alt:""}),"Time Estimation")),r.a.createElement(d.a,{title:"Add Image",to:"#",onClick:function(){return t.onOpenUpload()}},r.a.createElement("li",null,r.a.createElement("img",{src:"/assets/img/style.png",alt:""}),"Add Image")),r.a.createElement(d.a,{title:"Change Card Background",to:"#",onClick:function(){return t.onToggleAction("bgColor")}},r.a.createElement("li",null,r.a.createElement("img",{src:"/assets/img/palette.png",alt:""}),"Change Background")),r.a.createElement("input",{type:"file",ref:function(e){return t.inputElement=e},name:"imgUrl",onChange:this.onUploadImg,hidden:!0}),r.a.createElement(d.a,{title:"Move Card",to:"#",onClick:function(){return t.onToggleAction("move")}},r.a.createElement("li",null,r.a.createElement("img",{src:"/assets/img/back.png",className:"img-rotate",alt:""}),"Move Card")),r.a.createElement(d.a,{title:"Remove Card",to:"#",onClick:this.onToggleRemoveCard},r.a.createElement("li",{className:"li-last-child"},r.a.createElement("img",{src:"/assets/img/trash-white.png",alt:""}),"Remove Card")),c.dueDate&&r.a.createElement(Re,{isShown:c,onChange:this.onChangeDate,onSubmitDate:this.onSubmitDate,onToggleAction:m,value:n.dueDate,removeDueDate:this.removeDueDate}),c.label&&r.a.createElement(Re,(e={card:n,board:this.props.currBoard,isShown:c,addLabel:this.onAddLabel,onToggleAction:m},Object(g.a)(e,"card",n),Object(g.a)(e,"onChagneLabelColor",this.onChagneLabelColor),e)),c.members&&r.a.createElement(Re,{board:this.props.currBoard,isShown:c,card:n,addMember:this.onAddMember,onToggleAction:m,getCurrCard:this.getCurrCard}),c.bgColor&&r.a.createElement(Re,{board:this.props.currBoard,isShown:c,card:n,onChangeBgColor:this.onChangeBgColor,onToggleAction:m,getCurrCard:this.getCurrCard}),c.move&&r.a.createElement(Re,{board:this.props.currBoard,isShown:c,card:n,onToggleAction:m,moveCardToStack:this.moveCardToStack}),c.timeEstimation&&r.a.createElement(Re,{board:this.props.currBoard,isShown:c,card:n,onToggleAction:m,onAddTimeEstimation:this.onAddTimeEstimation,removeCardEstimation:this.removeCardEstimation}),c.changeLabel&&r.a.createElement(Re,{isShown:c,onToggleAction:m,card:n})),l&&r.a.createElement(xe,{onToggleRemoveCard:this.onToggleRemoveCard,onRemoveCard:this.onRemoveCard})))))):r.a.createElement(ce,null)}}]),a}(n.Component),Ge={save:te,loadBoard:$,saveCard:ee},Je=Object(E.b)((function(e){return{currBoard:e.board.currBoard,loggedInUser:e.user.loggedInUser}}),Ge)(ze),Ye=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={filterBy:{board:null,q:""}},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState((function(e){return{filterBy:Object(b.a)(Object(b.a)({},e.filterBy),{},Object(g.a)({},n,r))}}),(function(){e.props.loadUsers(e.state.filterBy)}))},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.setState({filterBy:{board:this.props.currBoard,q:""}},(function(){return e.props.loadUsers(e.state.filterBy)}))}},{key:"render",value:function(){var e=this.props,t=e.users,a=e.onClose,n=e.onAddMember,o=this.state.filterBy;return t?r.a.createElement(Me.a,{onOutsideClick:function(){return a()},display:"contents"},r.a.createElement("div",{className:"add-member-container slide-bottom"},r.a.createElement("div",{className:"add-member-title flex space-between align-center"},"Add Members",r.a.createElement("img",{src:"/assets/img/close-white.png",className:"close-icon",onClick:function(){return a()},alt:""})),r.a.createElement("input",{type:"text",placeholder:"Enter user name",autoComplete:"off",name:"q",value:o.q,onChange:this.handleChange,className:"add-member-input"}),r.a.createElement("div",{className:"members-list flex column"},t.map((function(e,t){return r.a.createElement(d.a,{to:"#",key:t,onClick:function(){return n(e)},className:"single-member"},e.username)}))))):r.a.createElement(ce,null)}}]),a}(n.Component),Ke={loadUsers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(){var t=Object(v.a)(h.a.mark((function t(a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,T.query(e);case 3:n=t.sent,a({type:"LOAD_USERS",users:n}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("userActions: cannot load users!",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()}},Ve=Object(E.b)((function(e){return{users:e.user.users,currBoard:e.board.currBoard}}),Ke)(Ye);function Xe(e){var t=e.type,a=e.onSetBg;return"image"===t?r.a.createElement("div",{className:"backgrounds-container"},["/assets/img/bg-beach.jpg","/assets/img/bg-flowers.jpg","/assets/img/bg-sunset.jpg","/assets/img/bg-view.jpg","/assets/img/bg-view2.jpg","/assets/img/bg-view3.jpg","/assets/img/bg-view4.jpg","/assets/img/bg-water.jpg","/assets/img/bg-view5.jpg"].map((function(e,t){return r.a.createElement("div",{key:t,className:"background",onClick:function(){return a(e,"img")},style:{backgroundImage:"url(".concat(e,")"),backgroundSize:"100%",backgroundPosition:"center"}})}))):r.a.createElement("div",{className:"backgrounds-container"},["#fd9644","#fc5c65","#fed330","#26de81","#2bcbba","#45aaf2","#4b7bec","#a55eea","#122961"].map((function(e,t){return r.a.createElement("div",{key:t,className:"background",onClick:function(){return a(e,"color")},style:{backgroundColor:e}})})))}var Qe=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={bgChooseShown:""},e.setBgShown=function(t){e.setState({bgChooseShown:t})},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.state.bgChooseShown,a=this.props.onSetBg;return r.a.createElement("div",{className:"board-styling-container"},r.a.createElement("div",{className:"board-styling-title flex align-center"},t&&r.a.createElement("img",{src:"/assets/img/back.png",onClick:function(){return e.setBgShown("")},className:"back small-icon",alt:""}),"Board Styling"),!t&&r.a.createElement("button",{onClick:function(){return e.setBgShown("color")},className:"background-choose color-choose"},r.a.createElement("span",null,"Background Color")),!t&&r.a.createElement("button",{onClick:function(){return e.setBgShown("image")},className:"background-choose img-choose"},r.a.createElement("span",null,"Background Image")),t&&r.a.createElement(Xe,{onSetBg:a,type:t}))}}]),a}(n.Component),Ze={save:te,loadBoard:$},$e=Object(E.b)((function(e){return{currBoard:e.board.currBoard}}),Ze)(Qe);function et(e){var t=e.board;return r.a.createElement("div",{className:"activities-container"},r.a.createElement("h2",{className:"activities-title"},"Activities"),r.a.createElement("ul",{className:"activities clean-list"},t.activities.map((function(e,t){return r.a.createElement("li",{key:t},r.a.createElement("span",{className:"bold"},e.byMember.username)," ",e.txt,r.a.createElement("p",{className:"activity-at"},he()(e.createdAt).fromNow()))}))))}function tt(e){return r.a.createElement("div",{className:"remove-board-container"},r.a.createElement("div",{className:"remove-board-title flex align-center space-between"},"Remove board",r.a.createElement("img",{src:"/assets/img/close.png",className:"close-icon",onClick:function(){return e.onToggleRemoveBoard()},alt:""})),r.a.createElement("p",null,"Are you sure you want to remove the board?"),r.a.createElement("button",{className:"btn btn-danger",onClick:function(){return e.onRemoveBoard()}},"Yes, remove!"))}var at=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isStylingShown:!1,isRemoveBoardShown:!1},e.onToggleStyling=function(){return e.setState((function(e){return{isStylingShown:!e.isStylingShown}}))},e.onToggleRemoveBoard=function(){return e.setState((function(e){return{isRemoveBoardShown:!e.isRemoveBoardShown}}))},e.onRemoveBoard=Object(v.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.props.board.isPublic){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.props.removeBoard(e.props.board._id);case 4:e.props.history.push("/boards");case 5:case"end":return t.stop()}}),t)}))),e.onToggleStatistics=function(){e.props.onClose(),e.props.toggleShowStatistics()},e.onCloseMenu=function(){e.props.onClose(),e.setState({isStylingShown:!1,isRemoveBoardShown:!1})},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.onSetBg,n=t.board,o=t.isOpen,s=t.isShowingStatistics,c=this.state,i=c.isStylingShown,l=c.isRemoveBoardShown;return r.a.createElement("div",{className:"board-menu-container ".concat(o?"board-menu-open":"")},r.a.createElement("div",{className:"board-menu-title flex space-between align-center"},"Board Managment",r.a.createElement("img",{src:"/assets/img/close-white.png",className:"close-icon",onClick:this.onCloseMenu,alt:""})),r.a.createElement("div",{className:"board-menu-content"},!i&&r.a.createElement("ul",{className:"board-menu-list clean-list"},r.a.createElement(d.a,{to:"#",onClick:this.onToggleStyling},r.a.createElement("li",null,r.a.createElement("img",{src:"/assets/img/style.png",className:"small-icon",alt:""}),"Board Styling")),r.a.createElement("div",{className:"pointer",onClick:function(){return e.onToggleStatistics()}},r.a.createElement("li",{className:"".concat(s?"active-stats":"")},r.a.createElement("img",{src:"/assets/img/stats.png",className:"small-icon",alt:""}),"Show Board Statistics")),r.a.createElement(d.a,{to:"#",onClick:this.onToggleRemoveBoard},r.a.createElement("li",{className:"remove-board"},r.a.createElement("img",{src:"/assets/img/trash.png",className:"small-icon",alt:""}),"Remove Board"))),l&&r.a.createElement(tt,{onToggleRemoveBoard:this.onToggleRemoveBoard,onRemoveBoard:this.onRemoveBoard}),!i&&r.a.createElement(et,{board:n}),i&&r.a.createElement($e,{onSetBg:a,onToggleStyling:this.onToggleStyling})))}}]),a}(n.Component),nt={removeBoard:function(e){return function(t){return z.remove(e).then((function(){t({type:"REMOVE_BOARD",boardId:e})}))}}},rt=Object(E.b)(null,nt)(at);function ot(e){var t=e.boardId;return r.a.createElement("div",{className:"filter-cards-container"},r.a.createElement("div",{className:"filter-scroll-cards"},e.cards.map((function(a,n){return r.a.createElement("div",{className:"filter-card",onClick:function(){return n=a.id,void e.history.push("/boards/".concat(t,"/card/").concat(n));var n},key:n},a.title)}))))}var st=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={filterBy:"",cards:[]},e.onSetFilterBy=function(t){var a=t.target;if(!a.value)return e.clearFilter();e.setState({filterBy:a.value},(function(){return e.filterBy(e.state.filterBy)}))},e.filterBy=function(){var t,a=e.state.filterBy,n=e.props.currBoard.stacks.map((function(e){return e.cards.filter((function(e){return e.title.toLowerCase().includes(a.toLowerCase())||e.description.toLowerCase().includes(a.toLowerCase())}))}));e.setState({cards:(t=[]).concat.apply(t,Object(me.a)(n))})},e.clearFilter=function(){setTimeout((function(){e.setState({cards:[],filterBy:""})}),100)},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props,t=e.currBoard,a=e.history,n=this.state,o=n.cards,s=n.filterBy;return r.a.createElement(r.a.Fragment,null,r.a.createElement("input",{className:"search-container flex align-center",autoComplete:"off",name:"filterBy",value:s,onBlur:this.clearFilter,onChange:this.onSetFilterBy}),o.length>0&&r.a.createElement(ot,{cards:o,history:a,boardId:t._id}))}}]),a}(n.Component),ct=Object(E.b)((function(e){return{currBoard:e.board.currBoard}}))(st),it=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isAddMemberShown:!1,isBoardMenuShown:!1,currBoard:null},e.onToggleAddMember=function(){return e.setState((function(e){return{isAddMemberShown:!e.isAddMemberShown}}))},e.onToggleBoardMenu=function(){return e.setState((function(e){return{isBoardMenuShown:!e.isBoardMenuShown}}))},e.onAddMember=function(t){var a=e.props,n=a.loggedInUser,r=a.currBoard;r.members.unshift(t),r.activities.unshift({id:L(),txt:"added ".concat(t.username," to the board"),createdAt:Date.now(),byMember:n}),e.props.save(r),e.onToggleAddMember()},e.onRemoveMember=function(t){var a=e.props,n=a.loggedInUser,r=a.currBoard,o=r.members.findIndex((function(e){return t._id===e._id}));r.members.splice(o,1),r.activities.unshift({id:L(),txt:"removed ".concat(t.username," from the board"),createdAt:Date.now(),byMember:n}),e.props.save(r),e.setState({currBoard:r})},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.setState({currBoard:this.props.currBoard})}},{key:"getTwoChars",value:function(e){var t;return(t=2!==e.split(" ").length?null===e||void 0===e?void 0:e.charAt(0):(null===e||void 0===e?void 0:e.charAt(0))+e.split(" ")[1].charAt(0))||(t=""),t}},{key:"render",value:function(){var e=this,t=this.props,a=t.board,n=t.onSetBg,o=t.history,s=t.toggleShowStatistics,c=t.isShowingStatistics,i=this.state,l=i.isAddMemberShown,u=i.isBoardMenuShown;return r.a.createElement("div",{className:"board-options-container ".concat(c?"stats-margin":"")},r.a.createElement("div",{className:"board-title flex align-center justify-center"},a.title),r.a.createElement("div",{className:"board-members flex"},a.members.map((function(t,a){return r.a.createElement("div",{key:a,className:"member flex justify-center align-center",style:{backgroundImage:"url(".concat(t.imgUrl,")"),backgroundColor:t.bgColor}},r.a.createElement("img",{onClick:function(){return e.onRemoveMember(t)},src:"/assets/img/close.png",className:"remove-member",alt:""}),r.a.createElement("span",{className:"member-two-chars"},e.getTwoChars(t.fullname)))}))),r.a.createElement("div",{className:"board-options flex"},r.a.createElement(ct,{history:o}),r.a.createElement("button",{className:"option flex align-center",onClick:function(){return e.onToggleAddMember()}},r.a.createElement("img",{src:"/assets/img/add-user.png",alt:""})),r.a.createElement("button",{className:"option flex align-center",onClick:function(){return e.onToggleBoardMenu()}},r.a.createElement("img",{src:"/assets/img/menu.png",alt:""}))),l&&r.a.createElement(Ve,{onClose:this.onToggleAddMember,onAddMember:this.onAddMember}),r.a.createElement(rt,{toggleShowStatistics:s,isOpen:u,history:o,onSetBg:n,board:a,onClose:this.onToggleBoardMenu,isShowingStatistics:c}))}}]),a}(n.Component),lt={save:te},ut=Object(E.b)((function(e){return{currBoard:e.board.currBoard,loggedInUser:e.user.loggedInUser}}),lt)(it),mt=a(271),dt=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).state={data:[{id:"",label:"",value:0,color:"#fff"}]},e.statsTimeOut=null,e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.statsTimeOut=setTimeout((function(){e.setState({data:e.props.data})}),250)}},{key:"componentDidUpdate",value:function(e){this.props.data!==e.data&&this.setState({data:this.props.data})}},{key:"componentWillUnmount",value:function(){this.statsTimeOut&&clearTimeout(this.statsTimeOut)}},{key:"render",value:function(){var e=function(e){return e.color},t=this.state.data;return r.a.createElement(mt.a,{data:t,margin:{top:10,right:80,bottom:80,left:80},innerRadius:.7,padAngle:0,cornerRadius:5,colors:e,borderWidth:2,borderColor:{from:"color",modifiers:[["darker",.2]]},radialLabelsSkipAngle:10,radialLabelsTextXOffset:6,radialLabelsTextColor:e,radialLabelsLinkOffset:-10,radialLabelsLinkDiagonalLength:16,radialLabelsLinkHorizontalLength:24,radialLabelsLinkStrokeWidth:1,radialLabelsLinkColor:{from:"color"},slicesLabelsSkipAngle:10,slicesLabelsTextColor:"#333333",animate:!0,motionStiffness:90,motionDamping:15,theme:{fontFamily:"openSansBold",fontSize:14},legends:[]})}}]),a}(r.a.Component),pt=a(266),gt=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).state={data:[{member:"",Tasks:0,"Done Tasks":0}],width:1e3},e.updateDimensions=function(){e.setState({width:window.innerWidth})},e.statsTimeOut=null,e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("resize",this.updateDimensions),this.statsTimeOut=setTimeout((function(){e.setState({data:e.props.data,maxTasks:e.props.maxTasks})}),250)}},{key:"componentDidUpdate",value:function(e){this.props.data!==e.data&&this.setState({data:this.props.data,maxTasks:this.props.maxTasks})}},{key:"componentWillUnmount",value:function(){this.statsTimeOut&&clearTimeout(this.statsTimeOut),window.removeEventListener("resize",this.updateDimensions)}},{key:"render",value:function(){var e=this.state,t=e.data,a=e.maxTasks,n=e.width;return r.a.createElement(pt.a,{data:t,keys:["Tasks","Done Tasks"],indexBy:"member",margin:{top:10,right:130,bottom:50,left:60},padding:.3,colors:function(e){return"Done Tasks"===e.id?"#a8a8a8":"#3867d6"},borderColor:{from:"color",modifiers:[["darker",1.6]]},axisTop:null,axisRight:null,axisBottom:{format:function(e){return"".concat(n<550?e.slice(0,3):e.slice(0,8))},tickSize:5,tickPadding:5,tickRotation:0,legend:n<700?"":"Users",legendPosition:"middle",legendOffset:40},axisLeft:{tickValues:a,tickSize:5,tickPadding:5,tickRotation:0,legend:"Tasks",legendPosition:"middle",legendOffset:-40},labelSkipWidth:12,labelSkipHeight:12,labelTextColor:{from:"color",modifiers:[["darker",1.6]]},legends:[{dataFrom:"keys",anchor:"bottom-right",direction:"column",justify:!1,translateX:120,translateY:0,itemsSpacing:2,itemWidth:100,itemHeight:20,itemDirection:"left-to-right",itemOpacity:.85,symbolSize:20,effects:[{on:"hover",style:{itemOpacity:1}}]}],animate:!0,motionStiffness:90,motionDamping:15,theme:{axis:{legend:{text:{fontFamily:"openSansBold",fontSize:14}},ticks:{text:{fontFamily:"openSans",fontSize:n<550?8:n<700?12:14}}},labels:{text:{fontFamily:"openSans",fontSize:14,stroke:"#fff",fill:"#fff",strokeWidth:1.5}},legends:{text:{fontFamily:"openSansBold",fontSize:14}}}})}}]),a}(r.a.Component);function ft(e){var t=e.info,a=e.type;return r.a.createElement("span",{className:"stat-info-block flex align-center justify-start"},r.a.createElement("div",{className:"stat-info-img flex align-center justify-center"},r.a.createElement("img",{className:"stat-img ".concat(a),src:"/assets/img/".concat(a,".png"),alt:""})),r.a.createElement("div",{className:"stat-info-details flex column align-center justify-content"},r.a.createElement("p",{className:"stats-info-p ".concat("timeEstimation"===a?"last-stat-info":"")},t),r.a.createElement("p",{className:"secondary"},"createdBy"===a?"created by":"timeEstimation"===a?"time estimation":a)))}var ht=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(c.a)(this,a),(e=t.call(this)).state={board:{},currView:"byUsers",cardCount:-1,boardStats:null},e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState((function(e){return{card:Object(b.a)(Object(b.a)({},e.card),{},Object(g.a)({},n,r))}}))},e.getStatsByLabels=function(e){var t={};return e.stacks.forEach((function(e){e.cards.forEach((function(e){e.labels.forEach((function(e){t[e.title]?t[e.title].count+=1:t[e.title]={count:1,color:e.color}}))}))})),Object.keys(t).map((function(e){var a=t[e];return{id:e,label:e,value:a.count,color:a.color}}))},e.getStatsByUsers=function(e){var t={},a=0;return e.stacks.forEach((function(e){e.cards.forEach((function(e){e.members.length&&e.members.forEach((function(n){t[n.username]||(t[n.username]={tasks:0,doneTasks:0,color:n.bgColor}),e.labels.some((function(e){return"done"===e.title}))?(t[n.username].tasks+=1,t[n.username].doneTasks+=1):t[n.username].tasks+=1,a<t[n.username].tasks&&(a=t[n.username].tasks),console.log(t)}))}))})),{userStatsData:Object.keys(t).map((function(e){var a=t[e];return{member:e,Tasks:a.tasks-a.doneTasks,"Done Tasks":a.doneTasks,color:a.color}})),maxTasks:a}},e.getStatsByDueDates=function(t){var a={"On Schedule":0,Delayed:0},n=0;return t.stacks.forEach((function(e){n+=e.cards.length,e.cards.forEach((function(e){""!==e.dueDate&&(+he()(e.dueDate).format("x")>Date.now()?a["On Schedule"]+=1:a.Delayed+=1)}))})),n?(e.state.cardCount!==n&&e.setState({cardCount:n}),Object.keys(a).map((function(e){return{id:e,label:e,value:a[e],color:"Delayed"===e?"tomato":"lightgreen"}}))):null},e.getBoardStats=function(t){if(!t.stacks)return null;var a,n=e.getStatsByLabels(t),r=e.getStatsByUsers(t),o=e.getStatsByDueDates(t),s=e.getTotalTimeEstimation(t);return null===o?e.setState({isNoCardsBoard:!0}):e.state.isNoCardsBoard&&e.setState({isNoCardsBoard:!1}),a={byLabels:n,byUsers:r.userStatsData,byDueDate:o,maxTasks:r.maxTasks,totalTimeEstimation:s},console.log(a),a},e.getTotalTimeEstimation=function(e){var t={days:0,hours:0,minutes:0};return e.stacks.forEach((function(e){e.cards.forEach((function(e){var a=e.timeEstimation;a&&""!==a&&(t.days+=+a.days,t.hours+=+a.hours,t.minutes+=+a.minutes)}))})),t.days+t.hours+t.minutes?(t.minutes>=60&&(t.hours+=t.minutes/60,t.minutes=t.minutes%60,30===t.minutes?(t.hours+=.5,t.minutes=0):15===t.minutes&&(t.hours+=.25,t.minutes=0)),t.hours>=24&&(t.days+=t.hours/24,t.hours=t.hours%24,12===t.hours?(t.days+=.5,t.hours=0):6===t.hours&&(t.days+=.25,t.hours=0)),(t.days?t.days>1?t.days+" days":t.days+" day":"")+" "+(t.hours?t.hours>1?"| "+t.hours+" hours":"| "+t.hours+" hour":"")+" "+(t.minutes?"| "+t.minutes+" min":"")):null},e.elStats=r.a.createRef(),e.statsTimeOut=null,e.boardStats=null,e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.currBoard&&(this.statsTimeOut=setTimeout((function(){var t=e.getBoardStats(e.props.currBoard);e.setState({board:e.props.currBoard,boardStats:t},(function(){}))}),250))}},{key:"componentDidUpdate",value:function(e){if(this.props.currBoard!==e.currBoard){var t=this.getBoardStats(this.props.currBoard);this.setState({board:this.props.currBoard,boardStats:t})}}},{key:"componentWillUnmount",value:function(){this.statsTimeOut&&clearTimeout(this.statsTimeOut)}},{key:"render",value:function(){var e=this.state,t=e.board,a=e.cardCount,n=e.boardStats,o=this.props,s=o.isShowingStatistics,c=o.toggleShowStatistics;return t?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"stats flex align-center justify-center"},r.a.createElement("section",{className:"board-statistics modal-container flex column ".concat(s?"":"board-statistics-closed"),onMouseDown:function(e){return e.stopPropagation()},ref:this.elStats},r.a.createElement("header",{className:"board-statistics-header-span flex align-center justify-center"},r.a.createElement("div",{className:"board-statistics-header-text flex align-baseline justify-center"},r.a.createElement("p",{className:"board-statistics-header"},t.title),r.a.createElement("p",{className:"secondary"},"statistics")),r.a.createElement("img",{className:"stats-back-btn",src:"/assets/img/back.png",alt:"",onClick:c})),r.a.createElement("small",{className:"board-statistics-info flex align-center space-evenly wrap"},n&&n.totalTimeEstimation?r.a.createElement(ft,{info:n.totalTimeEstimation,type:"timeEstimation"}):null,t.members?r.a.createElement(ft,{info:t.members.length,type:"members"}):null,t.stacks?r.a.createElement(ft,{info:t.stacks.length,type:"stacks"}):null,t.stacks&&a?r.a.createElement(ft,{info:a,type:"cards"}):null,t.activities?r.a.createElement(ft,{info:t.activities.length,type:"activities"}):null),n?r.a.createElement("section",{className:"board-statistics-content grid"},n.byUsers?r.a.createElement("div",{className:"stat-item by-users flex column justify-center align-center"},r.a.createElement("p",{className:"board-stats-title"},"Weekly Members Workload"),r.a.createElement(gt,{data:n.byUsers,maxTasks:n.maxTasks})):null,n.byLabels?r.a.createElement("div",{className:"stat-item by-labels flex column justify-center align-center"},r.a.createElement("p",{className:"board-stats-title"},"Most Popular Labels"),r.a.createElement(dt,{data:n.byLabels,type:"labels"})):null,n.byDueDate?r.a.createElement("div",{className:"stat-item by-due-date flex column justify-center align-center"},r.a.createElement("p",{className:"board-stats-title"},"On-Time/Delayed Work"),r.a.createElement(dt,{data:n.byDueDate,type:"dueDate"})):null):null))):""}}]),a}(r.a.Component),bt={save:te,loadBoard:$},vt=Object(E.b)((function(e){return{currBoard:e.board.currBoard,loggedInUser:e.user.loggedInUser}}),bt)(ht),Et=a(42);function kt(e,t,a){var n=Array.from(e),r=n.splice(t,1),o=Object(Et.a)(r,1)[0];return n.splice(a,0,o),n}function yt(e,t,a,n){var r=Array.from(e),o=Array.from(t),s=r.splice(a.index,1),c=Object(Et.a)(s,1)[0];o.splice(n.index,0,c);var i={};return i[a.droppableId]=r,i[n.droppableId]=o,i}var Ct=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={areLabelsOpen:!1,isShowingStatistics:!1,stackMenus:{}},e.populateStacksInfo=function(t){var a={};t.stacks.forEach((function(e){a[e.id]=!1})),e.setState({stackMenus:a})},e.setBoard=function(t){return e.props.setBoard(t)},e.onToggleLabels=function(){e.setState((function(e){return{areLabelsOpen:!e.areLabelsOpen}}))},e.getItemStyle=function(e,t){return Object(b.a)(Object(b.a)({},t),{},{background:e?"rgb(219, 219, 219)":"#ebecf0"})},e.onStackRemove=function(t){var a=Object(b.a)({},e.props.currBoard);if(!a.isPublic){var n=a.stacks.findIndex((function(e){return e.id===t}));a.stacks.splice(n,1),e.props.save(a)}},e.onStackAdd=function(t){var a=Object(b.a)({},e.props.currBoard),n=L();a.stacks.push({bgColor:"#fefefe",cards:[],id:n,title:t});var r=Object(b.a)({},e.state.stackMenus);r[n]=!1,e.setState({stackMenus:r},(function(){e.elStacksSection.scrollTo(9999,0),e.props.save(a)}))},e.onCardAdd=function(t,a){var n=Object(b.a)({},e.props.currBoard),r=n.stacks.findIndex((function(e){return a===e.id}));n.stacks[r].cards.push({id:L(),title:t,description:"",comments:[],checklists:[],members:[],labels:[],activities:[],byMember:e.props.loggedInUser,createdAt:Date.now(),dueDate:"",bgColor:"white",timeEstimation:""}),e.props.save(e.props.currBoard)},e.onDragEnd=function(t){var a=e.props,n=a.loggedInUser,r=a.currBoard,o=t.source,s=t.destination;if(s){var c=Object(me.a)(r.stacks),i=Object(b.a)({},r);if(o.droppableId===s.droppableId&&"board"===o.droppableId){var l=kt(c,o.index,s.index);i.stacks=l;var u=r.stacks[o.index].title,m=s.index+1;r.activities.unshift({id:L(),txt:"moved stack ".concat(u," to place number ").concat(m),createdAt:Date.now(),byMember:n})}else{var d=+o.droppableId,p=+s.droppableId;if(d===p){var g=kt(c[d].cards,o.index,s.index);i.stacks[d].cards=g}else{var f=r.stacks[+o.droppableId].title,h=r.stacks[+s.droppableId].title,v=r.stacks[+o.droppableId].cards[o.index].title;r.activities.unshift({id:L(),txt:"moved card ".concat(v," from ").concat(f," to ").concat(h),createdAt:Date.now(),byMember:n});var E=yt(c[d].cards,c[p].cards,o,s);i.stacks[d].cards=E[d],i.stacks[p].cards=E[p]}}e.props.save(i)}},e.onToggleAction=function(t){var a=e.state.stackMenus;for(var n in a)n!==t&&(a[n]=!1);a[t]=!a[t],e.setState({isShown:a})},e.onSetBg=function(t,a){if("img"===a){var n=t.slice(1,t.length+1);document.body.style.backgroundImage="url(/".concat(n,")"),document.body.style.backgroundColor="",e.props.currBoard.bg=n}else document.body.style.backgroundImage="",document.body.style.backgroundColor=t,e.props.currBoard.bg=t;var r=e.props.loggedInUser;e.props.currBoard.activities.unshift({id:L(),txt:"has changed the board background",createdAt:Date.now(),byMember:r}),e.props.save(e.props.currBoard)},e.toggleShowStatistics=function(){e.setState((function(e){return{isShowingStatistics:!e.isShowingStatistics}}))},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){if(!this.props.loggedInUser)return this.props.history.push("/boards");var e=this.props.match.params.boardId;Z.setup(),Z.emit("setBoard",e),Z.on("loadBoard",this.setBoard),this.props.loadBoard(e)}},{key:"componentDidUpdate",value:function(e){e.currBoard!==this.props.currBoard&&(document.body.style.backgroundImage="url(/".concat(this.props.currBoard.bg,")"),document.body.style.backgroundColor=this.props.currBoard.bg)}},{key:"componentWillUnmount",value:function(){this.props.loggedInUser&&(document.body.style="",Z.off("loadBoard",this.setBoard),Z.terminate())}},{key:"render",value:function(){var e=this,t=this.props,a=t.history,n=t.currBoard,o=this.state,s=o.areLabelsOpen,c=o.isShowingStatistics,i=o.isShown;return n?r.a.createElement(r.a.Fragment,null,r.a.createElement(ut,{isShowingStatistics:c,history:a,board:n,onSetBg:this.onSetBg,toggleShowStatistics:this.toggleShowStatistics}),r.a.createElement(m.a,{component:Je,path:"/boards/:boardId/card/:cardId"}),r.a.createElement("section",{className:"board-content flex align-start space-between"},c?r.a.createElement(vt,{isShowingStatistics:c,toggleShowStatistics:this.toggleShowStatistics}):n?r.a.createElement(de.a,{onDragEnd:this.onDragEnd},r.a.createElement(de.c,{droppableId:"board",isCombineEnabled:!1,type:"STACK",direction:"horizontal"},(function(t,a){return r.a.createElement("div",Object.assign({ref:t.innerRef},t.droppableProps,{className:"stacks-content flex"}),n.stacks.length?n.stacks.map((function(t,a){return r.a.createElement(de.b,{key:t.id,draggableId:t.id,index:a,type:"STACK"},(function(o,c){return r.a.createElement("div",Object.assign({ref:o.innerRef},o.draggableProps,{style:Object(b.a)(Object(b.a)({},e.getItemStyle(c.isDragging,o.draggableProps.style)),{},{width:250}),className:"stack-content flex column"}),r.a.createElement("div",Object.assign({className:"stack-header flex space-between"},o.dragHandleProps),r.a.createElement("div",{className:"stack-title"},t.title),r.a.createElement(d.a,{title:"Options",to:"#",onClick:function(){return e.onToggleAction(t.id)}},r.a.createElement("button",{className:"stack-header-menu"},". . .")),i&&i[t.id]&&r.a.createElement(Re,{onStackRemove:e.onStackRemove,stack:t,isShown:{stack:!0},onToggleAction:e.onToggleAction})),r.a.createElement(de.c,{key:a,droppableId:"".concat(a),isCombineEnabled:!1,type:"CARD"},(function(a,o){return r.a.createElement(ve,{innerRef:a.innerRef,provided:a},t.cards.map((function(t,a){return r.a.createElement(de.b,{key:t.id,draggableId:t.id,index:a,type:"CARD"},(function(a,o){return r.a.createElement("div",null,r.a.createElement(be,{title:t.title,innerRef:a.innerRef,provided:a,card:t,labelsOpen:s,onToggleLabels:e.onToggleLabels,link:"/boards/".concat(n._id,"/card/").concat(t.id),style:Object(b.a)(Object(b.a)({},e.getItemStyle(o.isDragging,a.draggableProps.style)),{},{background:t.bgColor}),history:e.props.history}))}))})),a.placeholder)})),r.a.createElement(ge,{type:"card",onCardAdd:e.onCardAdd,itemId:t.id}))}))})):null,t.placeholder)})),r.a.createElement("div",{className:"add-stack-container"},r.a.createElement(ge,{type:"stack",onStackAdd:this.onStackAdd}))):null)):r.a.createElement(ce,null)}}]),a}(r.a.Component),St={loadBoard:$,save:te,setBoard:function(e){return function(t){return t({type:"SET_BOARD",board:e})}},updateStackTitle:function(e,t){return function(a){return a({type:"UPDATE_STACK_TITLE",stack:{id:e,title:t}})}}},wt=Object(E.b)((function(e){return{currBoard:e.board.currBoard,loggedInUser:e.user.loggedInUser}}),St)(Ct),Ot=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={user:null,msg:"",isUploadImg:!1,isFinishUpload:!1,isErrorMsg:!1},e.onUploadImg=function(){var t=Object(v.a)(h.a.mark((function t(a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({isUploadImg:!0}),t.next=3,P(a);case 3:n=t.sent,e.setState({isUploadImg:!1,isFinishUpload:!0}),e.timeoutFinishUpload=setTimeout((function(){e.setState({isFinishUpload:!1})}),2500),e.setState((function(e){return{user:Object(b.a)(Object(b.a)({},e.user),{},{imgUrl:n})}}));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState((function(e){return{user:Object(b.a)(Object(b.a)({},e.user),{},Object(g.a)({},n,r))}}))},e.onUpdateUser=function(){var t=Object(v.a)(h.a.mark((function t(a){var n,r,o,s,c,i,l;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a.preventDefault(),n=e.state.user,r=n.username,o=n.password,s=n.fullname,c=n.imgUrl,i=n.confirmPassword,r&&o&&s){t.next=4;break}return t.abrupt("return",e.setState({msg:"Please enter username, password and full name",isErrorMsg:!0}));case 4:if(o||i){t.next=6;break}return t.abrupt("return",e.setState({msg:"Please enter username and password",isErrorMsg:!0}));case 6:if(o===i){t.next=8;break}return t.abrupt("return",e.setState({msg:"Passwords don't match!",isErrorMsg:!0}));case 8:return l={_id:e.props.loggedInUser._id,username:r,password:o,fullname:s,imgUrl:c},t.prev=9,t.next=12,e.props.update(l);case 12:return l._id=e.props.loggedInUser._id,t.next=15,e.props.login(l);case 15:t.next=20;break;case 17:return t.prev=17,t.t0=t.catch(9),t.abrupt("return",e.setState({isErrorMsg:!0,msg:t.t0}));case 20:return t.abrupt("return",e.setState({isErrorMsg:!1,msg:"User Updated Successfully"},(function(){setTimeout((function(){e.props.history.go(0),e.setState({msg:""})}),2e3)})));case 21:case"end":return t.stop()}}),t,null,[[9,17]])})));return function(e){return t.apply(this,arguments)}}(),e.onOpenUpload=function(){e.inputElement.click()},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this.props,t=e.loggedInUser,a=e.history;t||a.push("/login"),this.setState({user:t})}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeoutFinishUpload)}},{key:"render",value:function(){var e=this,t=this.state,a=t.user,n=t.msg,o=t.isErrorMsg,s=t.isUploadImg,c=o?{backgroundColor:"#dd1739"}:{backgroundColor:"#17d965"};return a?r.a.createElement("div",{className:"container flex justify-center"},r.a.createElement("div",{className:"form-container"},r.a.createElement("div",{className:"user-profile-container flex align-start"},r.a.createElement("div",{className:"user-content"},r.a.createElement("h2",{className:"user-profile-title flex align-center"},r.a.createElement("img",{src:"assets/img/user-icon.png",className:"user-icon",alt:""})," ",this.props.loggedInUser.fullname),r.a.createElement("form",{onSubmit:this.onUpdateUser,className:"user-profile-form flex column align-start"},r.a.createElement("input",{type:"text",placeholder:"User name",autoComplete:"off",onChange:this.handleChange,className:"profile-input input",name:"username",value:a.username}),r.a.createElement("input",{type:"text",placeholder:"Full name",autoComplete:"off",onChange:this.handleChange,className:"profile-input input",name:"fullname",value:a.fullname}),r.a.createElement("input",{type:"password",placeholder:"Password",autoComplete:"off",onChange:this.handleChange,className:"profile-input input",name:"password"}),r.a.createElement("input",{type:"password",placeholder:"Confirm Password",autoComplete:"off",onChange:this.handleChange,className:"profile-input input",name:"confirmPassword"}),r.a.createElement("input",{type:"file",name:"imgUrl",ref:function(t){return e.inputElement=t},onChange:this.onUploadImg,hidden:!0}),r.a.createElement("div",{className:"img-submit-container flex space-between align-start"},r.a.createElement("span",{className:"upload-img",onClick:function(){return e.onOpenUpload()}},"Upload Profile Image"),r.a.createElement("button",{className:"btn btn-success ".concat(s?"disable":""),disabled:s},"Save Changes"))),n&&r.a.createElement("div",{style:c,className:"user-msg flex align-center space-between"},n,r.a.createElement("img",{src:"assets/img/error-white.png",className:"small-icon",alt:""}))),r.a.createElement("div",{className:"user-img"},r.a.createElement("img",{src:a.imgUrl,alt:""}))))):r.a.createElement(ce,null)}}]),a}(n.Component),Nt={update:function(e){return function(){var t=Object(v.a)(h.a.mark((function t(a){var n;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,T.update(e);case 2:n=t.sent,a({type:"UPDATE_USER",updatedUser:n});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},login:I},jt=Object(E.b)((function(e){return{loggedInUser:e.user.loggedInUser}}),Nt)(Ot),xt=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(c.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={isScroll:!1,isMenuOpen:!1},e.handleScroll=function(){var t,a=document.body;0===(t=(t=document.documentElement).clientHeight?t:a).scrollTop?e.setState({isScroll:!1}):e.setState({isScroll:!0})},e.onLogout=Object(v.a)(h.a.mark((function t(){var a;return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.toggleMenu(),t.next=3,e.props.logout();case 3:a={username:"Guest-".concat(L(4)),password:"123456",fullname:"Guesty McGuest-".concat(L(4)),imgUrl:"https://res.cloudinary.com/shaishar9/image/upload/v1590398852/tgfntq8ghkaxjpo9seqa.jpg",isGuest:!0,bgColor:F()},e.props.signup(a);case 5:case"end":return t.stop()}}),t)}))),e.toggleMenu=function(){e.setState((function(e){return{isMenuOpen:!e.isMenuOpen}}))},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.scrollEvent()}},{key:"componentWillUnmount",value:function(){window.document.removeEventListener("scroll",this.handleScroll)}},{key:"scrollEvent",value:function(){window.document.addEventListener("scroll",this.handleScroll)}},{key:"render",value:function(){var e=this,t=this.props.loggedInUser,a=this.state,n=a.isMenuOpen,o=a.isScroll;return r.a.createElement(r.a.Fragment,null,n&&r.a.createElement("div",{className:"screen main-nav-screen",onClick:this.toggleMenu}),r.a.createElement("div",{className:"nav-container ".concat(o||!this.isHomepage?"scrolled":""," ").concat(n?"menu-open":""),style:this.isHomepage?{marginTop:"10px"}:{}},r.a.createElement("div",{className:"".concat(this.isHomepage?"container":"")},r.a.createElement("div",{className:"nav-content flex space-between align-center"},r.a.createElement(d.a,{to:"/"},r.a.createElement("img",{src:"/assets/img/logomain-white.png",className:"logo-img",alt:""})),r.a.createElement("ul",{className:"main-nav clean-list flex"},r.a.createElement("li",{className:"quit-menu"},r.a.createElement("button",{onClick:function(){return e.toggleMenu()}})),r.a.createElement("li",null,r.a.createElement(d.b,{onClick:this.toggleMenu,exact:!0,to:"/"},"Home")),t&&r.a.createElement("li",null,r.a.createElement(d.b,{onClick:this.toggleMenu,to:"/boards"},"Boards")),t&&r.a.createElement("li",null,r.a.createElement(d.b,{onClick:this.toggleMenu,to:"/profile"},"Profile")),(null===t||void 0===t?void 0:t.isGuest)&&r.a.createElement("li",null,r.a.createElement(d.b,{onClick:this.toggleMenu,to:"/signup"},"Signup")),(null===t||void 0===t?void 0:t.isGuest)&&r.a.createElement("li",null,r.a.createElement(d.b,{onClick:this.toggleMenu,to:"/login"},"Login")),!(null===t||void 0===t?void 0:t.isGuest)&&r.a.createElement("li",null,r.a.createElement(d.a,{to:"/",onClick:this.onLogout},"Logout"))),r.a.createElement("button",{onClick:this.toggleMenu,className:"btn-menu"})))))}},{key:"isHomepage",get:function(){return"/"===this.props.location.pathname}}]),a}(n.Component),Tt={logout:function(){return function(){var e=Object(v.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T.logout();case 2:t(R(null));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},signup:M},Bt=Object(E.b)((function(e){return{loggedInUser:e.user.loggedInUser}}),Tt)(xt),Dt=function(e){Object(l.a)(a,e);var t=Object(u.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.props.loggedInUser||this.guestSignup()}},{key:"guestSignup",value:function(){var e={username:"Guest-".concat(L(4)),password:"123456",fullname:"Guesty McGuest-".concat(L(4)),imgUrl:"https://res.cloudinary.com/shaishar9/image/upload/v1590398852/tgfntq8ghkaxjpo9seqa.jpg",isGuest:!0,bgColor:F()};this.props.signup(e)}},{key:"render",value:function(){return r.a.createElement("div",{className:"app"},r.a.createElement(m.a,{component:Bt,path:"/"}),r.a.createElement("main",{className:"main-content top-p"},r.a.createElement(m.c,null,r.a.createElement(m.a,{component:jt,path:"/user/:userId"}),r.a.createElement(m.a,{component:wt,path:"/boards/:boardId"}),r.a.createElement(m.a,{component:ue,path:"/boards"}),r.a.createElement(m.a,{component:jt,path:"/profile"}),r.a.createElement(m.a,{component:W,path:"/login"}),r.a.createElement(m.a,{component:W,path:"/signup"}),r.a.createElement(m.a,{component:p,path:"/"}))))}}]),a}(n.Component),At={signup:M},Ut=Object(E.b)((function(e){return{loggedInUser:e.user.loggedInUser}}),At)(Dt);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var It=a(38),Mt=a(269),Rt=null;sessionStorage.user&&(Rt=JSON.parse(sessionStorage.user));var Lt={loggedInUser:Rt,users:[]},Ft={boards:[],currBoard:null};var Pt=Object(It.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lt,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SET_USER":return Object(b.a)(Object(b.a)({},e),{},{loggedInUser:t.user});case"LOAD_USERS":return Object(b.a)(Object(b.a)({},e),{},{users:t.users});case"UPDATE_USER":return Object(b.a)(Object(b.a)({},e),{},{users:e.users.map((function(e){return e._id===t.user._id?t.user:e}))});default:return e}},board:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ft,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_BOARDS":return Object(b.a)(Object(b.a)({},e),{},{boards:t.boards});case"SET_BOARD":return Object(b.a)(Object(b.a)({},e),{},{currBoard:t.board});case"UPDATE_STACK_TITLE":return Object(b.a)(Object(b.a)({},e),{},{currBoard:Object(b.a)(Object(b.a)({},e.currBoard),{},{stacks:e.currBoard.stacks.map((function(e){return e.id===t.stack.id&&(e.title=t.stack.title),e}))})});case"SET_CARD":return Object(b.a)(Object(b.a)({},e),{},{currBoard:Object(b.a)(Object(b.a)({},e.currBoard),{},{stacks:e.currBoard.stacks.map((function(e){return e.cards=e.cards.map((function(e){return e.id===t.card.id?t.card:e})),e}))})});case"ADD_BOARD":return Object(b.a)(Object(b.a)({},e),{},{boards:[t.board].concat(Object(me.a)(e.boards))});case"UPDATE_BOARD":return Object(b.a)(Object(b.a)({},e),{},{boards:e.boards.map((function(e){return e._id===t.board._id?t.board:e}))});case"REMOVE_BOARD":return Object(b.a)(Object(b.a)({},e),{},{boards:e.boards.filter((function(e){return e._id!==t.boardId}))});default:return e}}}),_t=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||It.d,Ht=Object(It.e)(Pt,_t(Object(It.a)(Mt.a))),Wt=a(35),qt=Object(Wt.a)();s.a.render(r.a.createElement(E.a,{store:Ht},r.a.createElement(m.b,{history:qt},r.a.createElement(Ut,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[305,1,2]]]);
//# sourceMappingURL=main.932f51d2.chunk.js.map